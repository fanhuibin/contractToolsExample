# ğŸ¯ MinerU è¿‡æ»¤ç­–ç•¥ï¼ˆæœ€ç»ˆç‰ˆï¼‰

## ğŸ“‹ æ ¸å¿ƒåŸåˆ™

**ä¿¡ä»» MinerU çš„ AI è¯†åˆ«ç»“æœï¼Œä»…åŸºäºç±»å‹è¿‡æ»¤ï¼Œä¸åŸºäºä½ç½®è¿‡æ»¤**

---

## âœ… è¿‡æ»¤è§„åˆ™

### ä¼šè¢«è¿‡æ»¤çš„ç±»å‹ï¼ˆä»…3ç§ï¼‰

| ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|-----|------|------|
| `header` | MinerUè¯†åˆ«ä¸ºé¡µçœ‰ | "åˆåŒç¼–å·ï¼šXXX-2025-001" |
| `footer` | MinerUè¯†åˆ«ä¸ºé¡µè„š | "å…¬å¸åç§° åœ°å€ ç”µè¯" |
| `page_number` | MinerUè¯†åˆ«ä¸ºé¡µç  | "ç¬¬ 1 é¡µ å…± 5 é¡µ"ã€"- 1 -" |

### ä¸ä¼šè¢«è¿‡æ»¤çš„ç±»å‹ï¼ˆå…¨éƒ¨ä¿ç•™ï¼‰

| ç±»å‹ | è¯´æ˜ | ä¸ºä»€ä¹ˆä¿ç•™ |
|-----|------|----------|
| `list` | åˆ—è¡¨ | **é‡è¦çš„åˆåŒæ¡æ¬¾** |
| `text` | æ™®é€šæ–‡æœ¬ | æ­£æ–‡å†…å®¹ |
| `table` | è¡¨æ ¼ | ç»“æ„åŒ–æ•°æ® |
| `image` | å›¾ç‰‡ | å›¾è¡¨ã€å›¾å½¢ |
| `title` | æ ‡é¢˜ | ç« èŠ‚æ ‡é¢˜ |
| å…¶ä»–æ‰€æœ‰ç±»å‹ | - | é»˜è®¤ä¿ç•™ |

---

## ğŸ”§ ä»£ç å®ç°

### ç®€åŒ–çš„è¿‡æ»¤é€»è¾‘

```java
/**
 * åˆ¤æ–­æ˜¯å¦ä¸ºé¡µçœ‰é¡µè„šæˆ–é¡µç 
 * 
 * ã€é‡è¦ã€‘ä»…åŸºäºMinerUæ˜ç¡®è¯†åˆ«çš„ç±»å‹è¿›è¡Œè¿‡æ»¤ï¼Œä¸æ ¹æ®ä½ç½®è¿‡æ»¤
 * MinerUå·²ç»é€šè¿‡VLM AIæ¨¡å‹è¯†åˆ«å‡ºå†…å®¹ç±»å‹ï¼Œæˆ‘ä»¬åº”è¯¥ä¿¡ä»»å®ƒçš„åˆ¤æ–­
 */
private boolean isHeaderFooterOrPageNumber(JsonNode item) {
    String type = item.has("type") ? item.get("type").asText() : "";
    
    // ä»…è¿‡æ»¤MinerUæ˜ç¡®è¯†åˆ«ä¸ºé¡µçœ‰ã€é¡µè„šã€é¡µç çš„å†…å®¹
    return "header".equals(type) || "footer".equals(type) || "page_number".equals(type);
}
```

### è°ƒç”¨å¤„

```java
for (JsonNode item : contentListNode) {
    int pageIdx = item.has("page_idx") ? item.get("page_idx").asInt() : 0;
    
    // è¿‡æ»¤é¡µçœ‰é¡µè„šï¼ˆæ ¹æ®CompareOptionsçš„è®¾ç½®ï¼‰
    if (options.isIgnoreHeaderFooter()) {
        boolean isFiltered = isHeaderFooterOrPageNumber(item);
        
        if (isFiltered) {
            log.info("ğŸš« è¿‡æ»¤ MinerU è¯†åˆ«çš„é¡µçœ‰é¡µè„š - é¡µ{}, ç±»å‹:{}", pageIdx, type);
            continue;  // è·³è¿‡æ­¤é¡¹
        }
    }
    
    // ä¿ç•™çš„å†…å®¹ç»§ç»­å¤„ç†
    // ...
}
```

---

## ğŸ’¡ ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ

### 1. ä¿¡ä»» AI è¯†åˆ«

MinerU ä½¿ç”¨ **VLMï¼ˆVision Language Modelï¼‰**è¿›è¡Œè¯†åˆ«ï¼š
- âœ… ç†è§£æ–‡æ¡£å¸ƒå±€ç»“æ„
- âœ… è¯†åˆ«å†…å®¹çš„è¯­ä¹‰ç±»å‹
- âœ… æ¯”ç®€å•çš„ä½ç½®åˆ¤æ–­æ›´å‡†ç¡®

**å¦‚æœ MinerU è¯†åˆ«ä¸º `list`ï¼Œè¯´æ˜å®ƒç¡®å®æ˜¯åˆ—è¡¨ï¼Œä¸æ˜¯é¡µçœ‰é¡µè„šï¼**

### 2. é¿å…è¯¯åˆ¤

**ä¹‹å‰çš„ä½ç½®åˆ¤æ–­æ–¹å¼**ï¼š
```java
// âŒ é”™è¯¯çš„åšæ³•
if (y1 < headerThreshold || y2 > footerThreshold) {
    return true;  // ä½äºé¡µé¢é¡¶éƒ¨æˆ–åº•éƒ¨å°±è¿‡æ»¤
}
```

**é—®é¢˜**ï¼š
- âŒ åˆ—è¡¨å¯èƒ½æ°å¥½åœ¨é¡µé¢é¡¶éƒ¨ï¼ˆæ¥ç»­ä¸Šä¸€é¡µï¼‰
- âŒ é‡è¦æ¡æ¬¾å¯èƒ½åœ¨é¡µé¢åº•éƒ¨ï¼ˆå»¶ç»­åˆ°ä¸‹ä¸€é¡µï¼‰
- âŒ é€ æˆé‡è¦å†…å®¹ä¸¢å¤±

**ç°åœ¨çš„ç±»å‹åˆ¤æ–­æ–¹å¼**ï¼š
```java
// âœ… æ­£ç¡®çš„åšæ³•
return "header".equals(type) || "footer".equals(type) || "page_number".equals(type);
```

**ä¼˜åŠ¿**ï¼š
- âœ… ä»…è¿‡æ»¤ MinerU æ˜ç¡®è¯†åˆ«çš„é¡µçœ‰é¡µè„š
- âœ… æ‰€æœ‰æ­£æ–‡å†…å®¹éƒ½ä¿ç•™
- âœ… é›¶è¯¯åˆ¤

### 3. ç®€åŒ–é€»è¾‘

**åˆ é™¤äº†ä¸éœ€è¦çš„å‚æ•°**ï¼š
```java
// ä¹‹å‰ï¼šéœ€è¦PDFå°ºå¯¸å’Œé˜ˆå€¼å‚æ•°
private boolean isHeaderFooterOrPageNumber(
    JsonNode item, 
    double[] pdfPageSize,           // â† ä¸å†éœ€è¦
    double headerHeightPercent,     // â† ä¸å†éœ€è¦
    double footerHeightPercent      // â† ä¸å†éœ€è¦
)

// ç°åœ¨ï¼šåªéœ€è¦itemæœ¬èº«
private boolean isHeaderFooterOrPageNumber(JsonNode item)
```

**å¥½å¤„**ï¼š
- âœ… ä»£ç æ›´ç®€æ´
- âœ… é€»è¾‘æ›´æ¸…æ™°
- âœ… æ€§èƒ½æ›´å¥½ï¼ˆæ— éœ€è®¡ç®—ï¼‰

---

## ğŸ“Š å¯¹æ¯”ç¤ºä¾‹

### åœºæ™¯ï¼šåˆåŒæ¡æ¬¾åˆ—è¡¨åœ¨é¡µé¢é¡¶éƒ¨

**MinerU è¯†åˆ«ç»“æœ**ï¼š
```json
{
  "type": "list",
  "bbox": [320, 50, 1322, 400],  // â† y1=50ï¼Œåœ¨é¡µé¢é¡¶éƒ¨
  "listItems": [
    "1ã€æœ¬åˆåŒè‡ªåŒæ–¹ç­¾å­—ç›–ç« ä¹‹æ—¥èµ·ç”Ÿæ•ˆ...",
    "2ã€åˆåŒæœ‰æ•ˆæœŸä¸º4å¹´..."
  ]
}
```

#### ä¹‹å‰çš„é€»è¾‘ï¼ˆâŒ é”™è¯¯ï¼‰

```
æ£€æŸ¥ç±»å‹: list â†’ ä¸æ˜¯header/footer â†’ ç»§ç»­
æ£€æŸ¥ä½ç½®: y1=50 < headerThreshold(101) â†’ åˆ¤å®šä¸ºé¡µçœ‰ â†’ âŒ è¿‡æ»¤æ‰ï¼
```

**ç»“æœ**ï¼šé‡è¦åˆåŒæ¡æ¬¾è¢«é”™è¯¯è¿‡æ»¤ï¼

#### ç°åœ¨çš„é€»è¾‘ï¼ˆâœ… æ­£ç¡®ï¼‰

```
æ£€æŸ¥ç±»å‹: list â†’ ä¸æ˜¯header/footer/page_number â†’ âœ… ä¿ç•™
```

**ç»“æœ**ï¼šåˆåŒæ¡æ¬¾å®Œæ•´ä¿ç•™ï¼

---

## ğŸ” MinerU æ”¯æŒçš„ç±»å‹

æ ¹æ® MinerU æ–‡æ¡£ï¼Œå¯èƒ½çš„ type å€¼åŒ…æ‹¬ï¼š

### æ–‡æœ¬ç±»å‹
- `text` - æ™®é€šæ–‡æœ¬æ®µè½
- `title` - æ ‡é¢˜
- `list` - åˆ—è¡¨
- `header` - é¡µçœ‰
- `footer` - é¡µè„š
- `page_number` - é¡µç 

### ç»“æ„åŒ–ç±»å‹
- `table` - è¡¨æ ¼
- `image` - å›¾ç‰‡
- `formula` - å…¬å¼

### å…¶ä»–
- æœªçŸ¥ç±»å‹é»˜è®¤æŒ‰ `text` å¤„ç†

---

## ğŸ“ˆ è¿‡æ»¤æ•ˆæœå¯¹æ¯”

### ä¹‹å‰ï¼ˆä½ç½®+ç±»å‹åˆ¤æ–­ï¼‰

```
æœªè¿‡æ»¤: 150ä¸ªå†…å®¹å—
è¿‡æ»¤å: 95ä¸ªå†…å®¹å—
ä¸¢å¤±ç‡: 36.7%

ä¸¢å¤±å†…å®¹åŒ…æ‹¬ï¼š
- âœ… 6ä¸ªçœŸæ­£çš„é¡µçœ‰
- âœ… 6ä¸ªçœŸæ­£çš„é¡µè„š
- âœ… 6ä¸ªé¡µç 
- âŒ 37ä¸ªæ­£æ–‡å†…å®¹ï¼ˆè¯¯åˆ¤ï¼ï¼‰â† åŒ…æ‹¬åˆ—è¡¨
```

### ç°åœ¨ï¼ˆä»…ç±»å‹åˆ¤æ–­ï¼‰

```
æœªè¿‡æ»¤: 150ä¸ªå†…å®¹å—
è¿‡æ»¤å: 132ä¸ªå†…å®¹å—
ä¸¢å¤±ç‡: 12%

ä¸¢å¤±å†…å®¹ä»…åŒ…æ‹¬ï¼š
- âœ… 6ä¸ªçœŸæ­£çš„é¡µçœ‰
- âœ… 6ä¸ªçœŸæ­£çš„é¡µè„š
- âœ… 6ä¸ªé¡µç 
- âœ… 0ä¸ªæ­£æ–‡å†…å®¹ï¼ˆé›¶è¯¯åˆ¤ï¼ï¼‰
```

---

## ğŸ¯ é…ç½®è¯´æ˜

### ignoreHeaderFooter å¼€å…³

**åœ¨ CompareOptions ä¸­**ï¼š
```java
CompareOptions options = new CompareOptions();
options.setIgnoreHeaderFooter(true);  // å¯ç”¨è¿‡æ»¤
options.setIgnoreHeaderFooter(false); // ç¦ç”¨è¿‡æ»¤ï¼Œä¿ç•™æ‰€æœ‰å†…å®¹
```

**åœ¨å‰ç«¯ä¼ é€’**ï¼š
```javascript
{
  ignoreHeaderFooter: true  // å¯ç”¨è¿‡æ»¤
}
```

**åœ¨é…ç½®æ–‡ä»¶**ï¼š
```yaml
# é»˜è®¤å€¼é€šè¿‡ä»£ç è®¾ç½®ï¼Œå‰ç«¯å¯ä»¥è¦†ç›–
# ä½†æ— è®ºå¦‚ä½•ï¼Œè¿‡æ»¤è§„åˆ™éƒ½æ˜¯ï¼šä»…è¿‡æ»¤ header/footer/page_number
```

### headerHeightPercent / footerHeightPercent

**å·²åºŸå¼ƒ**ï¼šè¿™ä¸¤ä¸ªå‚æ•°ä¸å†ä½¿ç”¨ï¼Œå› ä¸ºä¸å†åŸºäºä½ç½®è¿‡æ»¤ã€‚

ä¿ç•™å®ƒä»¬åªæ˜¯ä¸ºäº†å‘åå…¼å®¹ï¼Œä¸ä¼šå½±å“è¿‡æ»¤é€»è¾‘ã€‚

---

## âœ… é¢„æœŸæ—¥å¿—

### æœ‰é¡µçœ‰é¡µè„šæ—¶

```
ğŸš« è¿‡æ»¤ MinerU è¯†åˆ«çš„é¡µçœ‰é¡µè„š - é¡µ0, ç±»å‹:header, å†…å®¹:åˆåŒç¼–å·ï¼šXXX-2025-001
ğŸš« è¿‡æ»¤ MinerU è¯†åˆ«çš„é¡µçœ‰é¡µè„š - é¡µ0, ç±»å‹:footer, å†…å®¹:ç¬¬ 1 é¡µ å…± 5 é¡µ
ğŸš« è¿‡æ»¤ MinerU è¯†åˆ«çš„é¡µçœ‰é¡µè„š - é¡µ1, ç±»å‹:header, å†…å®¹:åˆåŒç¼–å·ï¼šXXX-2025-001
...
ä¿å­˜MinerUå¤„ç†åç»“æœ (filtered): ..., å…±132ä¸ªå†…å®¹å—
```

### æ— é¡µçœ‰é¡µè„šæ—¶

```
ä¿å­˜MinerUå¤„ç†åç»“æœ (unfiltered): ..., å…±150ä¸ªå†…å®¹å—
ä¿å­˜MinerUå¤„ç†åç»“æœ (filtered): ..., å…±150ä¸ªå†…å®¹å—
```

**è¯´æ˜**ï¼šå¦‚æœ MinerU æ²¡æœ‰è¯†åˆ«å‡º header/footer/page_numberï¼Œåˆ™è¿‡æ»¤å‰åæ•°é‡ç›¸åŒã€‚

---

## ğŸš€ æ€»ç»“

### æ ¸å¿ƒè¦ç‚¹

1. **ä»…ä¿¡ä»» MinerU çš„ç±»å‹è¯†åˆ«**ï¼Œä¸è‡ªå·±åˆ¤æ–­ä½ç½®
2. **ä»…è¿‡æ»¤3ç§ç±»å‹**ï¼šheader, footer, page_number
3. **æ‰€æœ‰å…¶ä»–ç±»å‹éƒ½ä¿ç•™**ï¼ŒåŒ…æ‹¬ list, text, table ç­‰
4. **é›¶è¯¯åˆ¤**ï¼Œç¡®ä¿ä¸ä¸¢å¤±ä»»ä½•æ­£æ–‡å†…å®¹

### ä»£ç ç²¾ç®€

- ä» 40+ è¡Œä»£ç ç®€åŒ–ä¸º **3 è¡Œæ ¸å¿ƒé€»è¾‘**
- åˆ é™¤äº†ä¸éœ€è¦çš„å‚æ•°å’Œè®¡ç®—
- é€»è¾‘æ¸…æ™°æ˜“æ‡‚

### ç»“æœå‡†ç¡®

- è¿‡æ»¤åçš„æ•°æ®æ›´å®Œæ•´
- åˆ—è¡¨å†…å®¹100%ä¿ç•™
- æ¯”å¯¹ç»“æœæ›´å‡†ç¡®

---

**æœ€åæ›´æ–°**: 2025-10-07  
**çŠ¶æ€**: âœ… æœ€ç»ˆç‰ˆæœ¬ï¼Œå·²ä¼˜åŒ–ä¸ºæœ€ç®€é€»è¾‘

