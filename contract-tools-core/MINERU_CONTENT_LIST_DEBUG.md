# MinerU Content List è°ƒè¯•æ–‡ä»¶

## åŠŸèƒ½è¯´æ˜

ä¸ºäº†æ–¹ä¾¿è°ƒè¯• bbox åæ ‡é—®é¢˜ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¿å­˜æ ¼å¼åŒ–çš„ content_list æ•°æ®ã€‚

## ç”Ÿæˆçš„æ–‡ä»¶

æ¯æ¬¡ä½¿ç”¨ MinerU è¿›è¡Œè¯†åˆ«åï¼Œä¼šåœ¨ `ocr` ç›®å½•ä¸‹ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

```
uploads/compare-pro/tasks/{taskId}/ocr/
â”œâ”€â”€ mineru_raw_old.json                    # åŸå§‹å®Œæ•´å“åº”
â”œâ”€â”€ mineru_content_list_old.json           # æ ¼å¼åŒ–çš„ content_listï¼ˆJSONï¼‰â­ æ–°å¢
â”œâ”€â”€ mineru_content_list_old_stats.txt      # ç»Ÿè®¡ä¿¡æ¯ï¼ˆæ–‡æœ¬ï¼‰â­ æ–°å¢
â””â”€â”€ mineru_processed_old_filtered.json     # å¤„ç†åçš„ç»“æœ
```

## æ–‡ä»¶è¯´æ˜

### 1. mineru_content_list_old.json

**æ ¼å¼**ï¼šJSON æ•°ç»„ï¼Œæ ¼å¼åŒ–ç¼©è¿›

**å†…å®¹**ï¼šç›´æ¥ä» MinerU è¿”å›ä¸­æå–çš„ content_list æ•°ç»„

**ç¤ºä¾‹**ï¼š
```json
[
  {
    "type": "text",
    "text": "Hello World",
    "bbox": [100.5, 200.3, 500.7, 300.8],
    "page_idx": 0
  },
  {
    "type": "table",
    "table_caption": ["Table 1: Sales Data"],
    "table_body": "<table>...</table>",
    "bbox": [100, 400, 500, 600],
    "page_idx": 0
  }
]
```

**ç”¨é€”**ï¼š
- âœ… æŸ¥çœ‹ MinerU è¿”å›çš„åŸå§‹ bbox åæ ‡
- âœ… æ£€æŸ¥å†…å®¹ç±»å‹å’Œå­—æ®µ
- âœ… æ–¹ä¾¿ç”¨ç¼–è¾‘å™¨æœç´¢å’Œè¿‡æ»¤

### 2. mineru_content_list_old_stats.txt

**æ ¼å¼**ï¼šçº¯æ–‡æœ¬ï¼Œæ˜“äºé˜…è¯»

**å†…å®¹**ï¼šåŒ…å«ä¸¤éƒ¨åˆ†
1. ç»Ÿè®¡ä¿¡æ¯ï¼ˆæŒ‰ç±»å‹ã€æŒ‰é¡µé¢ï¼‰
2. è¯¦ç»†å†…å®¹é¡¹åˆ—è¡¨ï¼ˆå¸¦ bboxã€å°ºå¯¸ã€æ–‡æœ¬é¢„è§ˆï¼‰

**ç¤ºä¾‹**ï¼š
```
================================================================================
MinerU Content List ç»Ÿè®¡ä¿¡æ¯
================================================================================

æ€»å†…å®¹é¡¹æ•°: 45

æŒ‰ç±»å‹ç»Ÿè®¡:
----------------------------------------
  text                : 35
  table               : 5
  list                : 3
  image               : 2

æŒ‰é¡µé¢ç»Ÿè®¡:
----------------------------------------
  ç¬¬1é¡µ: 15ä¸ªå†…å®¹é¡¹
  ç¬¬2é¡µ: 18ä¸ªå†…å®¹é¡¹
  ç¬¬3é¡µ: 12ä¸ªå†…å®¹é¡¹

================================================================================
è¯¦ç»†å†…å®¹é¡¹ä¿¡æ¯
================================================================================

[1] ç¬¬1é¡µ - ç±»å‹: text
    bbox: [100.0, 200.0, 500.0, 300.0]
    å°ºå¯¸: 400.0 x 100.0
    æ–‡æœ¬: Hello World, this is a test document...

[2] ç¬¬1é¡µ - ç±»å‹: table
    bbox: [100.0, 400.0, 500.0, 600.0]
    å°ºå¯¸: 400.0 x 200.0
    è¡¨æ ¼HTMLé•¿åº¦: 1250

[3] ç¬¬1é¡µ - ç±»å‹: list
    bbox: [100.0, 650.0, 500.0, 800.0]
    å°ºå¯¸: 400.0 x 150.0
    åˆ—è¡¨é¡¹æ•°: 5
    ç¬¬ä¸€é¡¹: This is the first item in the list...
```

**ç”¨é€”**ï¼š
- âœ… å¿«é€Ÿäº†è§£æ–‡æ¡£ç»“æ„
- âœ… æŸ¥çœ‹æ¯ä¸ªå†…å®¹é¡¹çš„ bbox è¯¦ç»†ä¿¡æ¯
- âœ… æ£€æŸ¥ bbox å°ºå¯¸æ˜¯å¦åˆç†
- âœ… æ–¹ä¾¿æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æœç´¢

## å¦‚ä½•ä½¿ç”¨

### 1. æŸ¥çœ‹ bbox åæ ‡

**æ­¥éª¤**ï¼š
1. æ‰“å¼€ `mineru_content_list_old_stats.txt`
2. æ‰¾åˆ°æ„Ÿå…´è¶£çš„å†…å®¹é¡¹
3. æŸ¥çœ‹å…¶ bbox å’Œå°ºå¯¸

**ç¤ºä¾‹**ï¼š
```
[15] ç¬¬1é¡µ - ç±»å‹: text
    bbox: [324.0, 1017.0, 1322.0, 1195.0]
    å°ºå¯¸: 998.0 x 178.0
    æ–‡æœ¬: 23 wxc 2025-03-06
```

**åˆ†æ**ï¼š
- bbox å·¦ä¸Šè§’ï¼š(324, 1017)
- bbox å³ä¸‹è§’ï¼š(1322, 1195)
- å®½åº¦ï¼š998 ç‚¹
- é«˜åº¦ï¼š178 ç‚¹

### 2. æ£€æŸ¥åæ ‡èŒƒå›´

**æŸ¥çœ‹ PDF é¡µé¢å°ºå¯¸**ï¼ˆé€šå¸¸åœ¨è°ƒè¯•æ—¥å¿—ä¸­ï¼‰ï¼š
```
åæ ‡è½¬æ¢ - PDFå°ºå¯¸: 595x842, å›¾ç‰‡å°ºå¯¸: 2480x3508
```

**æ£€æŸ¥ bbox æ˜¯å¦åˆç†**ï¼š
- âœ… bbox çš„ x å€¼åº”è¯¥åœ¨ 0-595 ä¹‹é—´ï¼ˆPDF å®½åº¦ï¼‰
- âœ… bbox çš„ y å€¼åº”è¯¥åœ¨ 0-842 ä¹‹é—´ï¼ˆPDF é«˜åº¦ï¼‰
- âŒ å¦‚æœ bbox è¶…è¿‡ PDF å°ºå¯¸ï¼Œè¯´æ˜åæ ‡æœ‰é—®é¢˜

**ç¤ºä¾‹æ£€æŸ¥**ï¼š
```
PDF å®½åº¦: 595
bbox x èŒƒå›´: [324, 1322]  â† 1322 > 595ï¼Œè¶…å‡ºäº†ï¼âŒ
```

è¿™è¯´æ˜ MinerU è¿”å›çš„åæ ‡å¯èƒ½ä¸æ˜¯ PDF ç‚¹ï¼Œè€Œæ˜¯å…¶ä»–å•ä½ã€‚

### 3. å¯¹æ¯”å‰å bbox

**åŸå§‹ bbox**ï¼ˆmineru_content_list_old.jsonï¼‰ï¼š
```json
{
  "bbox": [324, 1017, 1322, 1195]
}
```

**è½¬æ¢å bbox**ï¼ˆè°ƒè¯•æ—¥å¿—ï¼‰ï¼š
```
MinerUåŸå§‹bbox: [324, 1017, 1322, 1195]
è½¬æ¢åå›¾ç‰‡bbox: [1350, 4237, 5508, 4976]
```

**åˆ†æ**ï¼š
- åŸå§‹ x: 324 â†’ è½¬æ¢å: 1350 ï¼ˆç¼©æ”¾äº†çº¦ 4.17 å€ï¼‰
- å¦‚æœç¼©æ”¾æ¯”ä¾‹ä¸å¯¹ï¼Œè¿™é‡Œå°±èƒ½çœ‹å‡ºæ¥

### 4. ç»Ÿè®¡ä¿¡æ¯

æŸ¥çœ‹ stats.txt é¡¶éƒ¨çš„ç»Ÿè®¡ä¿¡æ¯ï¼š

```
æ€»å†…å®¹é¡¹æ•°: 45

æŒ‰ç±»å‹ç»Ÿè®¡:
  text                : 35
  table               : 5  â† æ£€æŸ¥è¡¨æ ¼æ˜¯å¦è¢«è¯†åˆ«
  list                : 3
  image               : 2
```

**ç”¨é€”**ï¼š
- å¿«é€ŸçŸ¥é“æœ‰å¤šå°‘è¡¨æ ¼
- ç¡®è®¤æ‰€æœ‰ç±»å‹éƒ½è¢«è¯†åˆ«
- æŸ¥çœ‹æ¯é¡µçš„å†…å®¹åˆ†å¸ƒ

## è°ƒè¯• bbox åå¤§é—®é¢˜

### æ­¥éª¤ 1ï¼šæŸ¥çœ‹åŸå§‹åæ ‡èŒƒå›´

```bash
# æ‰“å¼€ stats.txtï¼ŒæŸ¥çœ‹å‡ ä¸ª bbox çš„æ•°å€¼
cat mineru_content_list_old_stats.txt | grep "bbox:" | head -5
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
    bbox: [324.0, 1017.0, 1322.0, 1195.0]
    bbox: [100.0, 200.0, 500.0, 400.0]
    bbox: [50.0, 50.0, 545.0, 792.0]
```

### æ­¥éª¤ 2ï¼šåˆ¤æ–­åæ ‡å•ä½

**æƒ…å†µ Aï¼šPDF ç‚¹åæ ‡**
- bbox å€¼åœ¨ 0-600 å·¦å³ï¼ˆæ¨ªå‘ï¼‰
- bbox å€¼åœ¨ 0-850 å·¦å³ï¼ˆçºµå‘ï¼‰
- ç¤ºä¾‹ï¼š`[100, 200, 500, 400]`

**æƒ…å†µ Bï¼šåƒç´ åæ ‡**
- bbox å€¼åœ¨ 0-2500 å·¦å³ï¼ˆæ¨ªå‘ï¼Œ200 DPIï¼‰
- bbox å€¼åœ¨ 0-3500 å·¦å³ï¼ˆçºµå‘ï¼Œ200 DPIï¼‰
- ç¤ºä¾‹ï¼š`[417, 833, 2084, 1666]`

**æƒ…å†µ Cï¼šå½’ä¸€åŒ–åæ ‡**
- bbox å€¼åœ¨ 0-1 ä¹‹é—´
- ç¤ºä¾‹ï¼š`[0.168, 0.237, 0.840, 0.475]`

### æ­¥éª¤ 3ï¼šç¡®å®šé—®é¢˜

**å¦‚æœæ˜¯æƒ…å†µ Aï¼ˆPDF ç‚¹ï¼‰**ï¼š
- å½“å‰ç¼©æ”¾é€»è¾‘æ­£ç¡®
- é—®é¢˜å¯èƒ½åœ¨å…¶ä»–åœ°æ–¹

**å¦‚æœæ˜¯æƒ…å†µ Bï¼ˆåƒç´ ï¼‰**ï¼š
- **ä¸éœ€è¦ç¼©æ”¾ï¼**
- ä¿®å¤ï¼šç›´æ¥ä½¿ç”¨åŸå§‹åæ ‡

**å¦‚æœæ˜¯æƒ…å†µ Cï¼ˆå½’ä¸€åŒ–ï¼‰**ï¼š
- éœ€è¦ä¹˜ä»¥å›¾ç‰‡å°ºå¯¸
- ä¿®å¤ï¼š`x = bbox[0] * imageWidth`

## å¿«é€ŸæŸ¥æ‰¾å‘½ä»¤

```bash
# æŸ¥çœ‹ç¬¬ä¸€ä¸ªå†…å®¹é¡¹çš„ bbox
jq '.[0].bbox' mineru_content_list_old.json

# æŸ¥çœ‹æ‰€æœ‰ bbox çš„ x æœ€å¤§å€¼
jq '[.[].bbox[2]] | max' mineru_content_list_old.json

# æŸ¥çœ‹æ‰€æœ‰ bbox çš„ y æœ€å¤§å€¼
jq '[.[].bbox[3]] | max' mineru_content_list_old.json

# æŸ¥çœ‹è¡¨æ ¼ç±»å‹çš„é¡¹
jq '.[] | select(.type == "table")' mineru_content_list_old.json

# ç»Ÿè®¡å„ç±»å‹æ•°é‡
jq 'group_by(.type) | map({type: .[0].type, count: length})' mineru_content_list_old.json
```

## æ–‡ä»¶ä½ç½®

è¿è¡Œæ¯”å¯¹åï¼Œæ–‡ä»¶ä¿å­˜åœ¨ï¼š
```
D:\git\zhaoxin-contract-tool-set\uploads\compare-pro\tasks\{taskId}\ocr\
```

å…¶ä¸­ `{taskId}` æ˜¯ä»»åŠ¡ IDï¼ˆæ—¶é—´æˆ³æ ¼å¼ï¼‰ã€‚

æœ€æ–°çš„ä»»åŠ¡é€šå¸¸åœ¨ï¼š
```bash
# Windows
dir /od uploads\compare-pro\tasks\

# æˆ–è€…ç›´æ¥æŸ¥çœ‹æœ€æ–°çš„
dir /od uploads\compare-pro\tasks\ | tail -1
```

## æ—¥å¿—è¾“å‡º

è¿è¡Œæ—¶ä¼šçœ‹åˆ°ï¼š
```
ä¿å­˜MinerUåŸå§‹å“åº”: D:\...\mineru_raw_old.json
ä¿å­˜æ ¼å¼åŒ–çš„ content_list: D:\...\mineru_content_list_old.json, å…±45ä¸ªå†…å®¹é¡¹
ä¿å­˜ content_list ç»Ÿè®¡ä¿¡æ¯: D:\...\mineru_content_list_old_stats.txt
```

## æ€»ç»“

**ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸¤ç§ç”¨é€”**ï¼š

| æ–‡ä»¶ | æ ¼å¼ | ç”¨é€” |
|------|------|------|
| mineru_content_list_old.json | JSON | ç¨‹åºåŒ–å¤„ç†ã€ç²¾ç¡®æŸ¥è¯¢ |
| mineru_content_list_old_stats.txt | æ–‡æœ¬ | äººå·¥é˜…è¯»ã€å¿«é€Ÿæµè§ˆ |

**è°ƒè¯• bbox æ—¶çš„æ£€æŸ¥æ¸…å•**ï¼š
- [ ] æŸ¥çœ‹ stats.txt ä¸­çš„ bbox æ•°å€¼èŒƒå›´
- [ ] ä¸ PDF é¡µé¢å°ºå¯¸å¯¹æ¯”
- [ ] ç¡®å®šåæ ‡å•ä½ï¼ˆç‚¹/åƒç´ /å½’ä¸€åŒ–ï¼‰
- [ ] æ£€æŸ¥ç¼©æ”¾æ¯”ä¾‹æ˜¯å¦åˆç†
- [ ] å¯¹æ¯”è½¬æ¢å‰åçš„åæ ‡

æœ‰äº†è¿™äº›æ–‡ä»¶ï¼Œbbox é—®é¢˜çš„è°ƒè¯•ä¼šå®¹æ˜“å¾ˆå¤šï¼ğŸ¯

