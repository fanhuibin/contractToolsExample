# Eclipse é…ç½®ä¸ç”Ÿæ•ˆçš„è§£å†³æ–¹æ¡ˆ

## âœ… å·²å®Œæˆçš„ä¿®å¤

### 1. åˆ é™¤äº†é‡å¤çš„ DPI é…ç½®

**ä¿®æ”¹çš„æ–‡ä»¶**ï¼š`contract-tools-sdk/src/main/resources/application-extract.yml`

**ä¿®æ”¹å‰**ï¼ˆç¬¬ 41 è¡Œï¼‰ï¼š
```yaml
render-dpi: ${OCR_DOTSOCR_RENDER_DPI:300}  â† é»˜è®¤ 300ï¼Œä¼šè¦†ç›–ä¸»é…ç½®ï¼
```

**ä¿®æ”¹å**ï¼š
```yaml
# render-dpi é…ç½®å·²ç§»è‡³ä¸»é…ç½®æ–‡ä»¶ application.yml  â† å·²åˆ é™¤
```

**åŸå› **ï¼š`application-extract.yml` ä½œä¸ºé¢å¤–é…ç½®ä¼šè¦†ç›– `application.yml` çš„è®¾ç½®ã€‚

---

## ğŸ¯ å½“å‰é…ç½®çŠ¶æ€

### æœ‰æ•ˆçš„é…ç½®æ–‡ä»¶

| æ–‡ä»¶ | DPI è®¾ç½® | çŠ¶æ€ | è¯´æ˜ |
|------|---------|------|------|
| `contract-tools-sdk/.../application.yml` | **20** | âœ… ä¸»é…ç½® | **æ‚¨ä¿®æ”¹çš„æµ‹è¯•å€¼** |
| `contract-tools-sdk/.../application-extract.yml` | æ—  | âœ… å·²åˆ é™¤ | ä¸å†è¦†ç›–ä¸»é…ç½® |
| `sdk/.../application.yml` | 160 | âš ï¸ å…¶ä»–é¡¹ç›® | å¦‚æœå¯åŠ¨ sdk é¡¹ç›®ä¼šç”¨è¿™ä¸ª |

---

## ğŸ”§ Eclipse æ¸…ç†æ­¥éª¤ï¼ˆé‡è¦ï¼ï¼‰

Eclipse å¯èƒ½ä¼šç¼“å­˜æ—§çš„é…ç½®å’Œç±»æ–‡ä»¶ï¼Œéœ€è¦æ¸…ç†ï¼š

### æ­¥éª¤ 1ï¼šæ¸…ç† Eclipse é¡¹ç›®

1. åœ¨ Eclipse ä¸­å³é”®ç‚¹å‡»é¡¹ç›®
2. é€‰æ‹© **"Clean..."** æˆ– **"æ¸…ç†..."**
3. å‹¾é€‰ç›¸å…³é¡¹ç›®ï¼ˆcontract-tools-sdk, contract-tools-coreï¼‰
4. ç‚¹å‡» **"Clean"** æˆ– **"æ¸…ç†"**

### æ­¥éª¤ 2ï¼šåˆ·æ–°é¡¹ç›®

1. å³é”®ç‚¹å‡»é¡¹ç›®
2. é€‰æ‹© **"Refresh"** æˆ– **"åˆ·æ–°"** (F5)

### æ­¥éª¤ 3ï¼šé‡æ–°æ„å»º

1. **Project** â†’ **Clean...** â†’ é€‰æ‹© **Clean all projects**
2. ç¡®ä¿å‹¾é€‰ **"Start a build immediately"**
3. ç‚¹å‡» **"Clean"**

### æ­¥éª¤ 4ï¼šåˆ é™¤è¿è¡Œé…ç½®ï¼ˆå¯é€‰ï¼‰

å¦‚æœä¸Šé¢æ­¥éª¤è¿˜ä¸è¡Œï¼š

1. **Run** â†’ **Run Configurations...**
2. æ‰¾åˆ°æ‚¨çš„å¯åŠ¨é…ç½®
3. å³é”® â†’ **Delete** åˆ é™¤
4. é‡æ–°åˆ›å»ºå¯åŠ¨é…ç½®

---

## ğŸ“‹ éªŒè¯æ¸…å•

### 1. æ£€æŸ¥å½“å‰å·¥ä½œç›®å½•

åœ¨ Eclipse å¯åŠ¨é…ç½®ä¸­ç¡®è®¤å·¥ä½œç›®å½•æ˜¯é¡¹ç›®æ ¹ç›®å½•ã€‚

**Run Configurations** â†’ **Arguments** æ ‡ç­¾ â†’ **Working directory**:
```
${workspace_loc:contract-tools-sdk}
```

### 2. æ£€æŸ¥å¯åŠ¨ç±»

ç¡®è®¤å¯åŠ¨çš„æ˜¯ï¼š
```
com.zhaoxinms.contract.template.sdk.SdkApplication
```

### 3. æŸ¥çœ‹å¯åŠ¨æ—¥å¿—

å¯åŠ¨ååº”è¯¥çœ‹åˆ°ï¼š
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•‘ ZxOcrConfig é…ç½®å·²åŠ è½½ (æ¥è‡ª: contract-tools-core)
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•‘ ğŸ“ é…ç½®å‰ç¼€: zxcm.compare.zxocr
â•‘ ğŸ¨ æ¸²æŸ“DPI: 20  â† åº”è¯¥æ˜¾ç¤º 20ï¼
â•‘ ğŸ–¼ï¸  å›¾ç‰‡æ ¼å¼: PNG
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

**å¦‚æœæ˜¾ç¤º 20**ï¼šâœ… é…ç½®ç”Ÿæ•ˆï¼
**å¦‚æœæ˜¾ç¤º 300**ï¼šâŒ è¿˜æœ‰é—®é¢˜ï¼Œç»§ç»­æ’æŸ¥

---

## ğŸ” å¦‚æœè¿˜æ˜¯ 300 DPIï¼Œç»§ç»­æ’æŸ¥

### æ£€æŸ¥ 1ï¼šç¡®è®¤é…ç½®æ–‡ä»¶ä½ç½®

åœ¨ Eclipse Console ä¸­æŸ¥æ‰¾ï¼š
```
Loading property source from location [classpath:/application.yml]
Loading property source from location [classpath:/application-extract.yml]
```

ç¡®è®¤åŠ è½½çš„æ˜¯å“ªä¸ªæ–‡ä»¶ã€‚

### æ£€æŸ¥ 2ï¼šæœç´¢æ‰€æœ‰ render-dpi

åœ¨é¡¹ç›®ä¸­å…¨å±€æœç´¢ `render-dpi`:
1. **Ctrl+H** æ‰“å¼€æœç´¢
2. **File Search** æ ‡ç­¾
3. æœç´¢ `render-dpi: 300`
4. æŸ¥çœ‹æ˜¯å¦è¿˜æœ‰å…¶ä»–åœ°æ–¹é…ç½®äº† 300

### æ£€æŸ¥ 3ï¼šæ£€æŸ¥ç¯å¢ƒå˜é‡

Eclipse å¯èƒ½è®¾ç½®äº†ç¯å¢ƒå˜é‡ï¼š

1. **Run Configurations** â†’ **Environment** æ ‡ç­¾
2. æŸ¥çœ‹æ˜¯å¦æœ‰ `OCR_DOTSOCR_RENDER_DPI=300`
3. å¦‚æœæœ‰ï¼Œåˆ é™¤æˆ–ä¿®æ”¹ä¸º 20

### æ£€æŸ¥ 4ï¼šæ£€æŸ¥ JVM å‚æ•°

1. **Run Configurations** â†’ **Arguments** æ ‡ç­¾
2. **VM arguments** ä¸­æŸ¥çœ‹æ˜¯å¦æœ‰ï¼š
   ```
   -Dzxcm.compare.zxocr.render-dpi=300
   ```
3. å¦‚æœæœ‰ï¼Œåˆ é™¤æˆ–ä¿®æ”¹

---

## ğŸš€ å¿«é€ŸéªŒè¯æ–¹æ³•

### æµ‹è¯• 1ï¼šä½¿ç”¨æç«¯å€¼

ä¿®æ”¹é…ç½®ä¸ºä¸€ä¸ªæç«¯å€¼æ¥éªŒè¯ï¼š
```yaml
render-dpi: 1  # æå°å€¼ï¼Œå¦‚æœç”Ÿæ•ˆä¼šç«‹å³å¤±è´¥
```

æˆ–
```yaml
render-dpi: 9999  # æå¤§å€¼ï¼Œå¦‚æœç”Ÿæ•ˆä¼šç«‹å³å¤±è´¥
```

å¦‚æœå¯åŠ¨æ—¶æŠ¥é”™æˆ–æ—¥å¿—ä¸­æ˜¾ç¤ºè¯¥å€¼ï¼Œè¯´æ˜é…ç½®**å·²ç”Ÿæ•ˆ**ã€‚

### æµ‹è¯• 2ï¼šæ·»åŠ æ—¥å¿—è¾“å‡º

åœ¨ `ZxOcrConfig` çš„ `logConfig()` æ–¹æ³•ä¸­æ·»åŠ æ–­ç‚¹æˆ–é¢å¤–æ—¥å¿—ï¼š
```java
@PostConstruct
public void logConfig() {
    System.out.println("========== DEBUG ==========");
    System.out.println("DPI from config: " + this.renderDpi);
    System.out.println("===========================");
    // ... åŸæœ‰æ—¥å¿—
}
```

---

## ğŸ“ å®Œæ•´çš„æ¸…ç†å’Œé‡å¯æµç¨‹

```bash
# 1. åœ¨ Eclipse ä¸­æ¸…ç†é¡¹ç›®
Project â†’ Clean... â†’ Clean all projects

# 2. åˆ·æ–°é¡¹ç›® (F5)

# 3. åˆ é™¤ Eclipse ç¼“å­˜ï¼ˆå¦‚æœè¿˜ä¸è¡Œï¼‰
# å…³é—­ Eclipseï¼Œåˆ é™¤ä»¥ä¸‹æ–‡ä»¶å¤¹ï¼š
.metadata\.plugins\org.eclipse.jdt.core
.metadata\.plugins\org.eclipse.core.resources

# 4. åˆ é™¤å·²ç¼–è¯‘çš„æ–‡ä»¶
Remove-Item -Recurse -Force contract-tools-sdk\target\classes
Remove-Item -Recurse -Force contract-tools-core\target\classes

# 5. é‡æ–°å¯¼å…¥é¡¹ç›®åˆ° Eclipse
File â†’ Import â†’ Existing Maven Projects

# 6. é‡æ–°å¯åŠ¨åº”ç”¨
```

---

## âœ… æœ€ç»ˆéªŒè¯

1. **æ¸…ç† Eclipse é¡¹ç›®**
2. **åˆ é™¤ç¼“å­˜å›¾ç‰‡**ï¼š
   ```powershell
   Remove-Item -Recurse -Force .\uploads\compare-pro\tasks\*
   ```
3. **é‡å¯åº”ç”¨**
4. **æŸ¥çœ‹å¯åŠ¨æ—¥å¿—**ï¼š
   ```
   ğŸ¨ æ¸²æŸ“DPI: 20  â† å¿…é¡»æ˜¯ 20
   ```
5. **æ‰§è¡Œæ¯”å¯¹ä»»åŠ¡**
6. **æŸ¥çœ‹å›¾ç‰‡ç”Ÿæˆæ—¥å¿—**ï¼š
   ```
   å¼€å§‹ç”ŸæˆXXä¸ªé¡µé¢å›¾ç‰‡ï¼ŒDPI: 20  â† å¿…é¡»æ˜¯ 20
   ```

---

## ğŸ¯ æ€»ç»“

### å·²ä¿®å¤çš„é—®é¢˜
âœ… åˆ é™¤äº† `application-extract.yml` ä¸­çš„é‡å¤ DPI é…ç½®
âœ… ç°åœ¨åªæœ‰ä¸€ä¸ªé…ç½®æºï¼š`application.yml`

### éœ€è¦åšçš„
1. âœ… Eclipse ä¸­æ¸…ç†é¡¹ç›®ï¼ˆProject â†’ Cleanï¼‰
2. âœ… åˆ·æ–°é¡¹ç›® (F5)
3. âœ… é‡å¯åº”ç”¨
4. âœ… æŸ¥çœ‹å¯åŠ¨æ—¥å¿—éªŒè¯

### é¢„æœŸç»“æœ
```
ğŸ¨ æ¸²æŸ“DPI: 20  â† å¦‚æœçœ‹åˆ°è¿™ä¸ªï¼Œè¯´æ˜é…ç½®ç”Ÿæ•ˆäº†ï¼
```

**ç°åœ¨åœ¨ Eclipse ä¸­æ‰§è¡Œæ¸…ç†æ“ä½œï¼Œç„¶åé‡å¯åº”ç”¨æµ‹è¯•ï¼** ğŸš€

