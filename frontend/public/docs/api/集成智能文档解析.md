# é›†æˆæ™ºèƒ½æ–‡æ¡£è§£æ

## ğŸ“š æ¦‚è¿°

æ™ºèƒ½æ–‡æ¡£è§£æä½¿ç”¨ OCR æŠ€æœ¯ï¼Œç²¾å‡†è¯†åˆ«æ–‡æ¡£æ–‡å­—å’Œç‰ˆé¢ä¿¡æ¯ï¼Œæ”¯æŒå¯è§†åŒ–æ ‡æ³¨ä¸æ™ºèƒ½æ£€ç´¢ã€‚æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•å°†æ­¤åŠŸèƒ½é›†æˆåˆ°ä½ çš„ç³»ç»Ÿä¸­ã€‚

> ğŸ’¡ **å…³äºç¤ºä¾‹ä»£ç **ï¼šæœ¬æ–‡æ¡£ä¸­çš„ä»£ç ç¤ºä¾‹é»˜è®¤åŸºäº **Java + Vue3** æŠ€æœ¯æ ˆï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬æ¨èçš„æŠ€æœ¯ç»„åˆã€‚ä½†è¯·æ³¨æ„ï¼Œ**æˆ‘ä»¬çš„ API æ˜¯è¯­è¨€æ— å…³çš„**ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»»ä½•è¯­è¨€ï¼ˆPythonã€PHPã€.NETã€Go ç­‰ï¼‰å’Œä»»ä½•å‰ç«¯æ¡†æ¶ï¼ˆReactã€Angular ç­‰ï¼‰è¿›è¡Œé›†æˆã€‚æˆ‘ä»¬æä¾› Java ç¤ºä¾‹ä»…ä½œä¸ºå‚è€ƒã€‚

## ğŸ“‹ æ¨èé›†æˆæ–¹æ¡ˆ

### â­ æ¨èæ–¹æ¡ˆï¼šæ··åˆé›†æˆ

1. **æäº¤è§£æä»»åŠ¡**ï¼šä½¿ç”¨ API æäº¤
   - âœ… çµæ´»æ§åˆ¶ä¸šåŠ¡æµç¨‹
   - âœ… å¯æ‰¹é‡æäº¤ä»»åŠ¡
   
2. **æ˜¾ç¤ºè§£æç»“æœ**ï¼šä¸¤ç§æ–¹å¼ä»»é€‰
   - **æ–¹å¼A**ï¼šä½¿ç”¨æˆ‘ä»¬çš„å®Œæ•´ç•Œé¢ï¼ˆiframe åµŒå…¥ï¼‰
     - âœ… å¼€ç®±å³ç”¨
     - âœ… å›¾æ–‡å¯¹ç…§æ˜¾ç¤º
     - âœ… é›¶å¼€å‘æˆæœ¬
   
   - **æ–¹å¼B**ï¼šè‡ªå®šä¹‰ UI
     - âœ… å®Œå…¨å®šåˆ¶åŒ–
     - âœ… æ·±åº¦é›†æˆåˆ°ç°æœ‰ç³»ç»Ÿ
     - âš ï¸ éœ€è¦è‡ªè¡Œå¤„ç†å¯è§†åŒ–æ˜¾ç¤º

---

## ğŸ“– é›†æˆæ­¥éª¤ï¼ˆæ¨èæ–¹æ¡ˆï¼‰

### ç¬¬ä¸€æ­¥ï¼šä½¿ç”¨ API æäº¤è§£æä»»åŠ¡

#### å¿«é€Ÿç¤ºä¾‹

```javascript
// æäº¤æ–‡æ¡£è§£æä»»åŠ¡
const formData = new FormData();
formData.append('file', pdfFile);
formData.append('ignoreHeaderFooter', 'true');
formData.append('headerHeightPercent', '6.0');
formData.append('footerHeightPercent', '6.0');

const response = await fetch('http://your-domain:8080/api/ocr/extract/upload', {
  method: 'POST',
  body: formData
});

const result = await response.json();
if (result.success) {
  const taskId = result.data.taskId; // ç”¨äºåç»­æŸ¥è¯¢
  console.log('ä»»åŠ¡ID:', taskId);
}
```

> ğŸ“– **å®Œæ•´ API è¯´æ˜**ï¼šè¯¦ç»†çš„æ¥å£å‚æ•°ã€å“åº”æ ¼å¼ã€çŠ¶æ€ç ç­‰è¯·æŸ¥çœ‹ [æ™ºèƒ½æ–‡æ¡£è§£æ API æ–‡æ¡£](./æ™ºèƒ½æ–‡æ¡£è§£æ-APIæ–‡æ¡£.md)

---

### ç¬¬äºŒæ­¥ï¼šé€‰æ‹©æ˜¾ç¤ºæ–¹å¼

#### æ–¹å¼Aï¼šåµŒå…¥å®Œæ•´ç•Œé¢

```html
<iframe 
  src="http://your-domain:3000/ocr/extract"
  width="100%"
  height="900px"
  frameborder="0"
  style="border: 1px solid #dcdfe6; border-radius: 4px;"
></iframe>
```

ç”¨æˆ·å¯ä»¥åœ¨iframeä¸­å®Œæˆæ•´ä¸ªè§£ææµç¨‹ï¼šä¸Šä¼ æ–‡ä»¶ â†’ æŸ¥çœ‹è¿›åº¦ â†’ æŸ¥çœ‹ç»“æœï¼ˆå›¾æ–‡å¯¹ç…§ï¼‰ã€‚

#### æ–¹å¼Bï¼šAPIæäº¤ + iframeæ˜¾ç¤ºç»“æœ

```javascript
// 1. é€šè¿‡APIæäº¤è§£æä»»åŠ¡
const taskId = await submitOcrTask(pdfFile);

// 2. ä½¿ç”¨iframeæ˜¾ç¤ºç»“æœ
const iframe = document.getElementById('ocrResultFrame');
iframe.src = `http://your-domain:3000/ocr/extract?taskId=${taskId}`;
```

```html
<iframe 
  id="ocrResultFrame"
  width="100%"
  height="800px"
  frameborder="0"
></iframe>
```

#### æ–¹å¼Cï¼šå®Œå…¨è‡ªå®šä¹‰UI

å¦‚æœä½ æƒ³å®Œå…¨è‡ªå®šä¹‰UIï¼Œéœ€è¦ï¼š

1. **æäº¤ä»»åŠ¡**ï¼šè°ƒç”¨ `/api/ocr/extract/upload`
2. **è½®è¯¢è¿›åº¦**ï¼šå®šæ—¶è°ƒç”¨ `/api/ocr/extract/status/{taskId}`
3. **è·å–ç»“æœ**ï¼šè°ƒç”¨ `/api/ocr/extract/result/{taskId}`
4. **è·å–é¡µé¢å›¾ç‰‡**ï¼šè°ƒç”¨ `/api/ocr/extract/page-image/{taskId}/{pageNum}`

> ğŸ“– **å®Œæ•´å®ç°**ï¼šè¯¦ç»†çš„è½®è¯¢é€»è¾‘ã€å¯è§†åŒ–æ˜¾ç¤ºç­‰è¯·å‚è€ƒ [æ™ºèƒ½æ–‡æ¡£è§£æ API æ–‡æ¡£](./æ™ºèƒ½æ–‡æ¡£è§£æ-APIæ–‡æ¡£.md)

> âš ï¸ **æç¤º**ï¼šè‡ªå®šä¹‰UIéœ€è¦å¤„ç†å›¾æ–‡å¯¹ç…§ã€ä½ç½®æ ‡æ³¨ç­‰å¤æ‚æ˜¾ç¤ºé€»è¾‘ï¼Œæ¨èä½¿ç”¨ iframe æ–¹å¼ä»¥èŠ‚çœå¼€å‘æˆæœ¬ã€‚

---

## ğŸ¨ è‡ªå®šä¹‰å‰ç«¯ UIï¼ˆé‡ç‚¹æ¨èï¼‰

### ä¸ºä»€ä¹ˆè¦è‡ªå®šä¹‰UIï¼Ÿ

å¦‚æœä½ å¸Œæœ›ï¼š
- âœ… **å“ç‰Œç»Ÿä¸€**ï¼šä¸ç°æœ‰ç³»ç»Ÿé£æ ¼å®Œå…¨ä¸€è‡´
- âœ… **åŠŸèƒ½å®šåˆ¶**ï¼šåªä¿ç•™éœ€è¦çš„åŠŸèƒ½ï¼Œéšè—ä¸éœ€è¦çš„
- âœ… **æ·±åº¦é›†æˆ**ï¼šåµŒå…¥åˆ°ç°æœ‰ç³»ç»Ÿä¸­ï¼Œè€Œä¸æ˜¯ç‹¬ç«‹é¡µé¢
- âœ… **å®Œå…¨æ§åˆ¶**ï¼šä¿®æ”¹äº¤äº’æµç¨‹ã€å¸ƒå±€ã€æ ·å¼

é‚£ä¹ˆ**æˆ‘ä»¬æä¾›å®Œæ•´çš„å‰ç«¯æºç **ï¼Œè®©ä½ å¯ä»¥è‡ªç”±å®šåˆ¶ï¼

---

### ğŸ“¦ å‰ç«¯æºç è¯´æ˜

æˆ‘ä»¬ä¸ºå®¢æˆ·æä¾›ï¼š

1. **frontend å®Œæ•´æºç **ï¼šåŸºäº Vue 3 + TypeScript + Element Plus çš„ç°ä»£åŒ–å‰ç«¯
2. **è§£æåŠŸèƒ½é¡µé¢**ï¼š`src/views/ocr/OcrExtract.vue`
3. **Canvaså¯è§†åŒ–ç»„ä»¶**ï¼š`src/views/extract/components/CanvasViewer.vue`
4. **æ„å»ºé…ç½®**ï¼šVite æ„å»ºé…ç½®ï¼Œæ”¯æŒè‡ªå®šä¹‰æ‰“åŒ…

> ğŸ“ **è·å–æºç **ï¼šå‰ç«¯æºç ä¸ºç§æœ‰åŒ–äº¤ä»˜å†…å®¹ï¼Œè¯·è”ç³»é”€å”®å›¢é˜Ÿè·å–æˆæƒã€‚

### ğŸ› ï¸ å®šåˆ¶æ­¥éª¤

#### ç¬¬ä¸€æ­¥ï¼šå®šåˆ¶æ ·å¼

ä¿®æ”¹ `src/views/ocr/OcrExtract.vue`ï¼š

```vue
<style scoped>
/* 1. ä¿®æ”¹ä¸»é¢˜è‰²ä¸ºä½ çš„å“ç‰Œè‰² */
:root {
  --primary-color: #1890ff;
  --success-color: #52c41a;
}

/* 2. è°ƒæ•´å¸ƒå±€æ ·å¼ */
.ocr-extract-container {
  max-width: 1600px;
  margin: 0 auto;
  padding: 24px;
}

/* 3. è‡ªå®šä¹‰Canvasæ ‡æ³¨æ ·å¼ */
.bbox-rect {
  stroke: #409eff;
  stroke-width: 2px;
  fill: rgba(64, 158, 255, 0.1);
}
</style>
```

#### ç¬¬äºŒæ­¥ï¼šæ„å»ºå’Œéƒ¨ç½²

```bash
# å¼€å‘ç¯å¢ƒæµ‹è¯•
npm run dev

# ç”Ÿäº§ç¯å¢ƒæ„å»º
npm run build

# æ„å»ºäº§ç‰©åœ¨ dist/ ç›®å½•
```

**éƒ¨ç½²æ–¹å¼1ï¼šNginx ç‹¬ç«‹éƒ¨ç½²**

```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    root /var/www/ocr-ui/dist;
    index index.html;
    
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    # API ä»£ç†ï¼ˆé¿å…è·¨åŸŸï¼Œéœ€è¦é…ç½®æˆ‘æ–¹åç«¯æœåŠ¡çš„åœ°å€ï¼‰
    location /api/ {
        proxy_pass http://backend:8080/api/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

**éƒ¨ç½²æ–¹å¼2ï¼šæ›¿æ¢æœåŠ¡å™¨çš„éƒ¨ç½²çš„å‰ç«¯**

ä¸€èˆ¬çš„éƒ¨ç½²ç›®å½•æ˜¯ /docker/nginx/htmlç›®å½•ï¼Œå…·ä½“ä»¥å®‰è£…ä¸ºå‡†ã€‚

---

## ğŸ“Š è§£æç»“æœæ•°æ®æ ¼å¼

### æ ‡å‡†å“åº”ç»“æ„

```json
{
  "code": 200,
  "success": true,
  "data": {
    "taskId": "ocr-task-20251105-001",
    "status": "completed",
    "fileName": "åˆåŒæ–‡æ¡£.pdf",
    "totalPages": 10,
    "extractedText": "å®Œæ•´çš„è¯†åˆ«æ–‡æœ¬å†…å®¹...",
    "textBoxes": [
      {
        "pageNum": 1,
        "text": "åˆåŒç¼–å·ï¼šGY-2025-001",
        "bbox": [100, 200, 300, 220],
        "confidence": 0.98
      }
    ],
    "processingTime": "15.5s"
  }
}
```

### å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `taskId` | string | ä»»åŠ¡å”¯ä¸€æ ‡è¯†ç¬¦ |
| `status` | string | ä»»åŠ¡çŠ¶æ€ï¼šprocessing/completed/failed |
| `fileName` | string | åŸå§‹æ–‡ä»¶å |
| `totalPages` | number | æ–‡æ¡£æ€»é¡µæ•° |
| `extractedText` | string | å®Œæ•´è¯†åˆ«æ–‡æœ¬ |
| `textBoxes` | array | æ–‡æœ¬æ¡†åˆ—è¡¨ï¼ŒåŒ…å«ä½ç½®å’Œå†…å®¹ |
| `bbox` | array | è¾¹ç•Œæ¡†åæ ‡ [x1, y1, x2, y2] |
| `confidence` | number | è¯†åˆ«ç½®ä¿¡åº¦ï¼ˆ0-1ï¼‰ |

---

## â“ å¸¸è§é—®é¢˜

### Q1: æˆ‘åº”è¯¥é€‰æ‹©å“ªç§é›†æˆæ–¹å¼ï¼Ÿ

**A**: æ ¹æ®éœ€æ±‚é€‰æ‹©ï¼š
- **å¿«é€Ÿé›†æˆ**ï¼šç›´æ¥åµŒå…¥ iframeï¼ˆå®Œæ•´ç•Œé¢ï¼‰
- **å¹³è¡¡æ–¹æ¡ˆ**ï¼šAPI æäº¤ + iframe æ˜¾ç¤ºç»“æœ
- **æ·±åº¦å®šåˆ¶**ï¼šè·å–å‰ç«¯æºç ï¼Œè‡ªå®šä¹‰ UI

### Q2: å‰ç«¯æºç å¦‚ä½•è·å–ï¼Ÿ

**A**: 
- è”ç³»é”€å”®è·å–æˆæƒï¼Œä¼šæä¾›å‰ç«¯æºç 
- æ”¯æŒè‡ªç”±ä¿®æ”¹å’Œå®šåˆ¶

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚éœ€äº†è§£æ›´å¤šåŠŸèƒ½æˆ–æœ‰å®šåˆ¶éœ€æ±‚ï¼Œè¯·è”ç³»ï¼š

- ğŸ“§ å®˜æ–¹ç½‘ç«™ï¼š[https://zhaoxinms.com](https://zhaoxinms.com)
- ğŸ“¦ äº§å“ä»·æ ¼ï¼š[https://zhaoxinms.com/price](https://zhaoxinms.com/price)

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [æ™ºèƒ½æ–‡æ¡£è§£æ API æ–‡æ¡£](./æ™ºèƒ½æ–‡æ¡£è§£æ-APIæ–‡æ¡£.md)
- [æ–‡æ¡£æ ¼å¼è½¬æ¢ API](./æ–‡æ¡£æ ¼å¼è½¬æ¢-APIæ–‡æ¡£.md)

