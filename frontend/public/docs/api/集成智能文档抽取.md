# 集成智能文档抽取

## 📚 概述

智能文档抽取功能可以根据预定义的模板规则，从 PDF 文档中精准提取结构化信息（如合同编号、甲方乙方、金额、日期等字段）。本文档介绍如何将此功能集成到你的系统中。

> 💡 **关于示例代码**：本文档中的代码示例默认基于 **Java + Vue3** 技术栈，这也是我们推荐的技术组合。但请注意，**我们的 API 是语言无关的**，你可以使用任何语言（Python、PHP、.NET、Go 等）和任何前端框架（React、Angular 等）进行集成。我们提供 Java 示例仅作为参考。

## 🎯 核心功能

- ✅ **模板化抽取**：创建抽取模板，定义字段和提取规则
- ✅ **AI 辅助创建**：使用 AI 自动生成抽取模板
- ✅ **正则表达式**：支持复杂的文本匹配规则
- ✅ **表格抽取**：支持从表格中提取数据
- ✅ **批量处理**：支持批量文档抽取
- ✅ **结果验证**：可视化显示抽取结果并修正

## 📋 推荐集成方案

我们推荐采用以下集成方式：

### ⭐ 推荐方案：混合集成（最佳实践）

1. **模板设计**：使用我们提供的可视化界面（通过 iframe 嵌入）
   - ✅ 专业的模板设计器
   - ✅ AI 辅助创建模板
   - ✅ 正则表达式可视化测试
   - ✅ 无需开发UI

2. **文档提取**：两种方式任选
   - **方式A**：使用我们的提取界面（iframe 嵌入）
     - ✅ 开箱即用
     - ✅ 实时显示提取结果
     - ✅ 零开发成本
   
   - **方式B**：自行开发UI + 调用后端 API
     - ✅ 完全定制化UI
     - ✅ 与现有系统深度集成
     - ✅ 灵活控制业务流程

### 其他方案对比

| 集成方式 | 模板设计 | 文档提取 | 适用场景 | 推荐指数 |
|---------|---------|---------|---------|---------|
| **混合集成** | iframe 嵌入 | iframe 或 API | 大多数场景 | ⭐⭐⭐⭐⭐ |
| **完全 iframe** | iframe 嵌入 | iframe 嵌入 | 快速集成 | ⭐⭐⭐⭐ |
| **完全 API** | API 创建 | API 调用 | 深度定制 | ⭐⭐⭐ |

---

## 📖 集成步骤（推荐方案）

### 第一步：嵌入模板设计界面

**强烈建议使用我们的可视化模板设计器**，而不是通过 API 手动创建模板：

#### 1. 嵌入模板管理页面

```html
<iframe 
  src="http://your-domain:3000/rule-extract/templates"
  width="100%"
  height="800px"
  frameborder="0"
  style="border: 1px solid #dcdfe6; border-radius: 4px;"
></iframe>
```

用户可以在此界面：
- 创建新模板
- 编辑现有模板
- 测试模板效果
- 管理字段规则

#### 2. 嵌入 AI 模板生成页面（推荐）

```html
<iframe 
  src="http://your-domain:3000/rule-extract/ai-generator"
  width="100%"
  height="900px"
  frameborder="0"
></iframe>
```

AI 会自动分析文档并生成抽取规则，大大提升效率！

---

### 第二步：选择提取方式

#### 方式A：使用我们的提取界面

```html
<!-- 完整的提取界面 -->
<iframe 
  src="http://your-domain:3000/rule-extract/extract"
  width="100%"
  height="700px"
  frameborder="0"
></iframe>
```

用户可以：
1. 选择已创建的模板
2. 上传PDF文件
3. 实时查看提取结果
4. 导出提取数据

#### 方式B：自行开发UI + 调用API（推荐）

如果你想完全控制UI和业务流程：

##### 1. 获取模板列表

```http
GET /api/rule-extract/templates?status=enabled
```

**响应示例**：

```json
{
  "code": 200,
  "data": [
    {
      "id": "1234567890",
      "templateName": "采购合同模板",
      "templateCode": "purchase_contract",
      "status": "enabled"
    }
  ],
  "success": true
}
```

##### 2. 调用提取接口

```http
POST /api/rule-extract/extract/upload
Content-Type: multipart/form-data

file: <PDF文件>
templateId: 1234567890
ignoreHeaderFooter: true
headerHeightPercent: 6.0
footerHeightPercent: 6.0
```

**响应示例**：

```json
{
  "code": 200,
  "data": {
    "taskId": "task-20251105-001",
    "extractedData": {
      "contractNo": "GY-2025-001",
      "partyA": "北京某某科技有限公司",
      "amount": "1000000.00"
    },
    "confidence": {
      "contractNo": 0.95,
      "partyA": 0.88,
      "amount": 0.92
    }
  },
  "success": true
}
```

---

## 🔧 高级场景

### 如果确实需要通过API创建模板

虽然我们强烈推荐使用可视化界面，但某些场景下（如批量导入模板）可能需要API：

#### 通过 API 创建模板（不推荐）

> ⚠️ **注意**：我们强烈不建议使用API创建模板，因为：
> - 需要手写复杂的正则表达式
> - 无法可视化测试效果
> - 容易出错且调试困难
> - 使用可视化界面效率更高

## ❓ 常见问题

### Q1: 抽取结果不准确怎么办？

**A**: 检查以下几点：
1. 正则表达式是否正确
2. 文档格式是否一致
3. 是否忽略了页眉页脚
4. 尝试调整锚点关键词的位置和距离

### Q2: 如何处理多种格式的文档？

**A**: 有两种方式：
1. 为每种格式创建单独的模板
2. 使用更宽松的正则表达式匹配多种格式

### Q3: AI 生成的模板准确率如何？

**A**: 
- 对于标准格式文档：85%左右
- 对于非标准文档：60%
- 建议：AI 生成后人工校验和优化

---

## 📞 技术支持

如需了解更多功能或有定制需求，请联系：

- 📧 官方网站：[https://zhaoxinms.com](https://zhaoxinms.com)
- 📦 产品价格：[https://zhaoxinms.com/price](https://zhaoxinms.com/price)

## 🔗 相关文档

- [智能文档抽取 API 文档](./智能文档抽取-API文档.md)
- [文档格式转换 API](./文档格式转换-API文档.md)
- [API 设计规范](./API设计文档.md)

