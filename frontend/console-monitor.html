<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ§åˆ¶å°ç›‘æ§å™¨</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background-color: #1e1e1e;
            color: #d4d4d4;
            margin: 0;
            padding: 20px;
        }
        
        .header {
            background-color: #2d2d30;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .header h1 {
            margin: 0;
            color: #569cd6;
        }
        
        .controls {
            margin-bottom: 20px;
        }
        
        button {
            background-color: #0e639c;
            color: white;
            border: none;
            padding: 8px 16px;
            margin-right: 10px;
            border-radius: 3px;
            cursor: pointer;
        }
        
        button:hover {
            background-color: #1177bb;
        }
        
        button:disabled {
            background-color: #555;
            cursor: not-allowed;
        }
        
        .console-output {
            background-color: #252526;
            border: 1px solid #3c3c3c;
            border-radius: 5px;
            padding: 15px;
            height: 500px;
            overflow-y: auto;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .log-entry {
            margin-bottom: 5px;
            padding: 2px 0;
        }
        
        .log-entry.log {
            color: #d4d4d4;
        }
        
        .log-entry.warn {
            color: #dcdcaa;
        }
        
        .log-entry.error {
            color: #f48771;
        }
        
        .timestamp {
            color: #608b4e;
            margin-right: 10px;
        }
        
        .log-type {
            color: #4ec9b0;
            margin-right: 10px;
            font-weight: bold;
        }
        
        .status {
            background-color: #2d2d30;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .status.connected {
            border-left: 4px solid #4caf50;
        }
        
        .status.disconnected {
            border-left: 4px solid #f44336;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ–¥ï¸ æ§åˆ¶å°ç›‘æ§å™¨</h1>
        <p>å®æ—¶ç›‘æ§åº”ç”¨æ§åˆ¶å°è¾“å‡º</p>
    </div>
    
    <div class="status" id="status">
        <span>çŠ¶æ€: <span id="connectionStatus">æœªè¿æ¥</span></span>
    </div>
    
    <div class="controls">
        <button onclick="openApp()">æ‰“å¼€åº”ç”¨</button>
        <button onclick="clearLogs()">æ¸…ç©ºæ—¥å¿—</button>
        <button onclick="toggleAutoScroll()" id="autoScrollBtn">è‡ªåŠ¨æ»šåŠ¨: å¼€å¯</button>
    </div>
    
    <div class="console-output" id="consoleOutput">
        <div class="log-entry">
            <span class="timestamp">[ç­‰å¾…è¿æ¥]</span>
            <span class="log-type">[INFO]</span>
            <span>æ§åˆ¶å°ç›‘æ§å™¨å·²å‡†å¤‡å°±ç»ª</span>
        </div>
        <div class="log-entry">
            <span class="timestamp">[æç¤º]</span>
            <span class="log-type">[INFO]</span>
            <span>ç‚¹å‡»"æ‰“å¼€åº”ç”¨"æŒ‰é’®å¼€å§‹ç›‘æ§</span>
        </div>
    </div>

    <script>
        let autoScroll = true;
        let logCount = 0;
        
        function openApp() {
            // æ‰“å¼€åº”ç”¨é¡µé¢
            const appWindow = window.open('http://localhost:3002/home', '_blank');
            if (appWindow) {
                updateStatus('å·²è¿æ¥', 'connected');
                addLog('INFO', 'åº”ç”¨é¡µé¢å·²æ‰“å¼€ï¼Œå¼€å§‹ç›‘æ§æ§åˆ¶å°è¾“å‡º...');
                
                // æ¨¡æ‹Ÿç›‘æ§ï¼ˆå®é™…é¡¹ç›®ä¸­éœ€è¦é€šè¿‡WebSocketæˆ–å…¶ä»–æ–¹å¼è·å–çœŸå®æ—¥å¿—ï¼‰
                startMockMonitoring();
            } else {
                addLog('ERROR', 'æ— æ³•æ‰“å¼€åº”ç”¨é¡µé¢ï¼Œè¯·æ£€æŸ¥URLæ˜¯å¦æ­£ç¡®');
            }
        }
        
        function startMockMonitoring() {
            // è¿™æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿçš„ç›‘æ§ï¼Œå®é™…ä½¿ç”¨æ—¶éœ€è¦æ›¿æ¢ä¸ºçœŸå®çš„æ—¥å¿—è·å–é€»è¾‘
            addLog('INFO', 'å¼€å§‹ç›‘æ§åŒæ­¥æ»šåŠ¨åŠŸèƒ½...');
            addLog('INFO', 'ç­‰å¾…ç”¨æˆ·æ“ä½œä»¥ç”Ÿæˆæ—¥å¿—...');
        }
        
        function addLog(type, message) {
            const output = document.getElementById('consoleOutput');
            const timestamp = new Date().toLocaleTimeString();
            
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type.toLowerCase()}`;
            logEntry.innerHTML = `
                <span class="timestamp">[${timestamp}]</span>
                <span class="log-type">[${type}]</span>
                <span>${message}</span>
            `;
            
            output.appendChild(logEntry);
            logCount++;
            
            // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
            if (autoScroll) {
                output.scrollTop = output.scrollHeight;
            }
            
            // é™åˆ¶æ—¥å¿—æ¡æ•°ï¼Œé¿å…å†…å­˜æº¢å‡º
            if (logCount > 1000) {
                const firstChild = output.firstElementChild;
                if (firstChild) {
                    output.removeChild(firstChild);
                    logCount--;
                }
            }
        }
        
        function clearLogs() {
            const output = document.getElementById('consoleOutput');
            output.innerHTML = '';
            logCount = 0;
            addLog('INFO', 'æ—¥å¿—å·²æ¸…ç©º');
        }
        
        function toggleAutoScroll() {
            autoScroll = !autoScroll;
            const btn = document.getElementById('autoScrollBtn');
            btn.textContent = `è‡ªåŠ¨æ»šåŠ¨: ${autoScroll ? 'å¼€å¯' : 'å…³é—­'}`;
        }
        
        function updateStatus(status, className) {
            const statusElement = document.getElementById('status');
            const statusText = document.getElementById('connectionStatus');
            statusText.textContent = status;
            statusElement.className = `status ${className}`;
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            addLog('INFO', 'æ§åˆ¶å°ç›‘æ§å™¨åˆå§‹åŒ–å®Œæˆ');
            addLog('INFO', 'ä½¿ç”¨è¯´æ˜:');
            addLog('INFO', '1. ç‚¹å‡»"æ‰“å¼€åº”ç”¨"æŒ‰é’®æ‰“å¼€ç›®æ ‡åº”ç”¨');
            addLog('INFO', '2. åœ¨åº”ç”¨ä¸­è¿›è¡Œæ“ä½œï¼Œæ—¥å¿—å°†å®æ—¶æ˜¾ç¤ºåœ¨æ­¤å¤„');
            addLog('INFO', '3. å¯ä»¥ä½¿ç”¨"æ¸…ç©ºæ—¥å¿—"æ¸…ç†è¾“å‡º');
            addLog('INFO', '4. "è‡ªåŠ¨æ»šåŠ¨"æ§åˆ¶æ˜¯å¦è‡ªåŠ¨æ»šåŠ¨åˆ°æœ€æ–°æ—¥å¿—');
        });
    </script>
</body>
</html>
