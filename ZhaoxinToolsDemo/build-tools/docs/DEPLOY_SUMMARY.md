# è‚‡æ–°å·¥å…·é›† Demo éƒ¨ç½²æ–¹æ¡ˆæ€»ç»“

## ğŸ¯ éƒ¨ç½²æ–¹æ¡ˆæ¦‚è§ˆ

æœ¬é¡¹ç›®æä¾›äº†**ä¸‰ç§éƒ¨ç½²æ–¹æ¡ˆ**ï¼Œæ»¡è¶³ä¸åŒç¯å¢ƒéœ€æ±‚ï¼š

### 1. å¼€å‘ç¯å¢ƒ - åˆ†ç¦»éƒ¨ç½²
- **å‰ç«¯**: å¼€å‘æœåŠ¡å™¨ (ç«¯å£ 3004)
- **åç«¯**: Spring Boot åº”ç”¨ (ç«¯å£ 8091)
- **é€‚ç”¨åœºæ™¯**: æœ¬åœ°å¼€å‘ã€åŠŸèƒ½æµ‹è¯•

### 2. ç®€å•éƒ¨ç½² - è„šæœ¬å¯åŠ¨
- **å‰ç«¯**: é™æ€æ–‡ä»¶æœåŠ¡å™¨
- **åç«¯**: JAR åŒ…ç›´æ¥è¿è¡Œ
- **é€‚ç”¨åœºæ™¯**: å¿«é€Ÿæ¼”ç¤ºã€ä¸´æ—¶éƒ¨ç½²

### 3. ç”Ÿäº§éƒ¨ç½² - Nginx ç»Ÿä¸€ â­ **æ¨è**
- **ç»Ÿä¸€ç«¯å£**: 80 ç«¯å£è®¿é—®æ‰€æœ‰æœåŠ¡
- **å‰ç«¯**: Nginx é™æ€æ–‡ä»¶æœåŠ¡
- **åç«¯**: Nginx åå‘ä»£ç†åˆ° 8091
- **é€‚ç”¨åœºæ™¯**: ç”Ÿäº§ç¯å¢ƒã€æ­£å¼éƒ¨ç½²

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ„å»ºé¡¹ç›®
```bash
# Windows
./build.bat

# Linux  
./build.sh
```

### Nginx ç”Ÿäº§éƒ¨ç½² (æ¨è)
```bash
# 1. æ„å»ºå®Œæˆåï¼Œè¿›å…¥ nginx ç›®å½•
cd dist/nginx

# 2. æ‰§è¡Œä¸€é”®éƒ¨ç½²è„šæœ¬
sudo ./deploy-nginx.sh

# 3. è®¿é—®æœåŠ¡
# å‰ç«¯: http://your-server-ip/
# API:  http://your-server-ip/api/
```

## ğŸ“ æ„å»ºäº§ç‰©ç»“æ„

```
dist/
â”œâ”€â”€ backend/                    # åç«¯ JAR åŒ…
â”‚   â””â”€â”€ zhaoxin-tools-demo-backend-1.0.0.jar
â”œâ”€â”€ frontend/                   # å‰ç«¯é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ assets/
â”œâ”€â”€ scripts/                    # å¼€å‘ç¯å¢ƒå¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ start-all.bat          # Windows ä¸€é”®å¯åŠ¨
â”‚   â”œâ”€â”€ start-all.sh           # Linux ä¸€é”®å¯åŠ¨
â”‚   â””â”€â”€ ...
â”œâ”€â”€ config/                     # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ application.yml        # åç«¯é…ç½®
â”œâ”€â”€ nginx/                      # Nginx éƒ¨ç½²æ–‡ä»¶ â­
â”‚   â”œâ”€â”€ nginx.conf             # Nginx é…ç½®
â”‚   â”œâ”€â”€ deploy-nginx.sh        # è‡ªåŠ¨éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ NGINX_DEPLOY.md        # è¯¦ç»†éƒ¨ç½²æ–‡æ¡£
â””â”€â”€ README.md                   # éƒ¨ç½²è¯´æ˜
```

## ğŸ”§ Nginx é…ç½®ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **ç»Ÿä¸€ç«¯å£è®¿é—®** - å‰åç«¯éƒ½é€šè¿‡ 80 ç«¯å£
- âœ… **åå‘ä»£ç†** - `/api/*` è‡ªåŠ¨è½¬å‘åˆ°åç«¯
- âœ… **é™æ€æ–‡ä»¶æœåŠ¡** - é«˜æ•ˆçš„å‰ç«¯èµ„æºæœåŠ¡
- âœ… **SPA è·¯ç”±æ”¯æŒ** - Vue Router è·¯ç”±æ­£å¸¸å·¥ä½œ

### æ€§èƒ½ä¼˜åŒ–
- âœ… **Gzip å‹ç¼©** - å‡å°‘ä¼ è¾“å¤§å°
- âœ… **é™æ€èµ„æºç¼“å­˜** - 1å¹´ç¼“å­˜æœŸ
- âœ… **è¿æ¥å¤ç”¨** - Keep-alive è¿æ¥
- âœ… **è´Ÿè½½å‡è¡¡** - æ”¯æŒå¤šåç«¯å®ä¾‹

### å®‰å…¨ç‰¹æ€§
- âœ… **å®‰å…¨å¤´è®¾ç½®** - XSSã€CSRF é˜²æŠ¤
- âœ… **æ–‡ä»¶ä¸Šä¼ é™åˆ¶** - é˜²æ­¢å¤§æ–‡ä»¶æ”»å‡»
- âœ… **é”™è¯¯é¡µé¢** - å‹å¥½çš„é”™è¯¯æç¤º

## ğŸŒ è®¿é—®åœ°å€

### å¼€å‘ç¯å¢ƒ
- å‰ç«¯: `http://localhost:3004`
- åç«¯: `http://localhost:8091`

### Nginx ç”Ÿäº§ç¯å¢ƒ
- å‰ç«¯: `http://your-server-ip/`
- åç«¯API: `http://your-server-ip/api/`
- å¥åº·æ£€æŸ¥: `http://your-server-ip/health`

## âš™ï¸ é…ç½®è¯´æ˜

### å…³é”®é…ç½®ä¿®æ”¹

**1. åŸŸåé…ç½®**
```nginx
# ä¿®æ”¹ nginx.conf
server_name your-domain.com;
```

**2. åç«¯æœåŠ¡åœ°å€**
```yaml
# ä¿®æ”¹ application.yml
zhaoxin:
  demo:
    backend-url: http://your-server-ip:8091
```

**3. API æœåŠ¡åœ°å€**
```yaml
# ä¿®æ”¹ application.yml
zhaoxin:
  api:
    base-url: http://your-zhaoxin-api-server
```

## ğŸ› ï¸ æœåŠ¡ç®¡ç†

### åç«¯æœåŠ¡ç®¡ç†
```bash
# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status zhaoxin-demo-backend

# é‡å¯æœåŠ¡
sudo systemctl restart zhaoxin-demo-backend

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u zhaoxin-demo-backend -f
```

### Nginx ç®¡ç†
```bash
# é‡æ–°åŠ è½½é…ç½®
sudo systemctl reload nginx

# æŸ¥çœ‹è®¿é—®æ—¥å¿—
sudo tail -f /var/log/nginx/zhaoxin-demo-access.log
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**502 Bad Gateway**
```bash
# æ£€æŸ¥åç«¯æœåŠ¡
sudo systemctl status zhaoxin-demo-backend
sudo netstat -tlnp | grep 8091
```

**404 Not Found**
```bash
# æ£€æŸ¥å‰ç«¯æ–‡ä»¶
ls -la /usr/share/nginx/html/zhaoxin-demo/
sudo nginx -t
```

**æ–‡ä»¶ä¸Šä¼ å¤±è´¥**
```bash
# æ£€æŸ¥æ–‡ä»¶å¤§å°é™åˆ¶
grep client_max_body_size /etc/nginx/conf.d/zhaoxin-demo.conf
```

## ğŸ“š è¯¦ç»†æ–‡æ¡£

- **å®Œæ•´éƒ¨ç½²æŒ‡å—**: `nginx/NGINX_DEPLOY.md`
- **æ„å»ºè¯´æ˜**: `BUILD_GUIDE.md` (å¦‚æœå­˜åœ¨)
- **API æ–‡æ¡£**: è®¿é—® `http://your-server-ip/api/doc.html`

## ğŸ‰ éƒ¨ç½²æˆåŠŸéªŒè¯

éƒ¨ç½²å®Œæˆåï¼Œé€šè¿‡ä»¥ä¸‹æ­¥éª¤éªŒè¯ï¼š

1. **å‰ç«¯è®¿é—®** - æµè§ˆå™¨æ‰“å¼€é¦–é¡µ
2. **API æµ‹è¯•** - è®¿é—® `/health` æ¥å£
3. **åŠŸèƒ½æµ‹è¯•** - æµ‹è¯•æ–‡æ¡£æ¯”å¯¹åŠŸèƒ½
4. **æ—¥å¿—æ£€æŸ¥** - ç¡®è®¤æ— é”™è¯¯æ—¥å¿—

---

**ğŸ¯ æ¨èä½¿ç”¨ Nginx ç”Ÿäº§éƒ¨ç½²æ–¹æ¡ˆï¼Œä¸€é”®éƒ¨ç½²ï¼Œå¼€ç®±å³ç”¨ï¼**
