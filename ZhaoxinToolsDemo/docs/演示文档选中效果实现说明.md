# 演示文档选中效果实现说明

## 📋 功能概述

为智能文档比对、智能文档抽取、智能合同合成三个功能页面的左侧演示文档列表添加了选中状态的视觉效果。

## 🎯 实现效果

### 视觉效果

**选中状态**：
- ✅ 蓝色边框（`#409EFF`，2px 宽度）
- ⚪ 保持白色背景
- 🔴 保持红色图标
- ⬛ 保持原文字颜色

**未选中状态**：
- 白色背景
- 灰色边框（`#e4e7ed`，1px 宽度）
- 红色图标（PDF 风格）

**悬停状态**：
- 蓝色边框
- 轻微阴影
- 向上平移 2px

## 🔧 实现细节

### 修改的文件

**文件路径**: `ZhaoxinToolsDemo/frontend/src/components/DemoLayout.vue`

---

### 1. 添加选中状态管理

```javascript
const selectedDocId = ref(null) // 当前选中的文档ID
```

**说明**:
- 使用 `ref` 创建响应式状态
- 存储当前选中文档的 ID
- 初始值为 `null`（无选中）

---

### 2. 更新点击事件处理

```javascript
// 点击文档
const handleDocClick = (doc) => {
  console.log('📄 选择演示文档:', doc)
  selectedDocId.value = doc.id // 更新选中状态
  emit('doc-select', doc)
}
```

**说明**:
- 在文档被点击时，更新 `selectedDocId` 为当前文档的 ID
- 触发 `doc-select` 事件通知父组件

---

### 3. 清除选中状态（新建任务）

```javascript
// 新建任务
const handleNewTask = () => {
  console.log('📝 点击新建任务')
  selectedDocId.value = null // 清除选中状态
  emit('new-task')
}
```

**说明**:
- 在点击"新建任务"按钮时，清除选中状态
- 适用于智能文档比对功能

---

### 4. 模板中绑定动态类名

```vue
<div 
  v-for="doc in filteredDocuments" 
  :key="doc.id"
  class="doc-item"
  :class="{ active: selectedDocId === doc.id }"
  @click="handleDocClick(doc)"
>
```

**说明**:
- 使用 `:class` 动态绑定
- 当 `selectedDocId === doc.id` 时，添加 `active` 类
- Vue 会自动响应状态变化

---

### 5. 添加选中状态样式

```scss
.doc-item {
  // ... 基础样式 ...

  &:hover {
    border-color: #409EFF;
    box-shadow: 0 2px 8px rgba(64, 158, 255, 0.15);
    transform: translateY(-2px);
  }

  /* 选中状态样式 */
  &.active {
    border-color: #409EFF;
    border-width: 2px;
  }
}
```

**样式说明**:

| 属性 | 值 | 说明 |
|------|---|------|
| `border-color` | `#409EFF` | 蓝色边框 |
| `border-width` | `2px` | 边框加粗（未选中为 1px） |

---

## 🎨 视觉对比

### 未选中状态
```
┌─────────────────────────────┐ ← 灰色边框（1px）
│ 🔴 合同比对示例             │ ← 红色PDF图标
│    演示合同版本对比...      │ ← 正常文字
└─────────────────────────────┘ ← 白色背景
```

### 选中状态
```
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓ ← 蓝色加粗边框（2px）
┃ 🔴 合同比对示例             ┃ ← 红色PDF图标（保持不变）
┃    演示合同版本对比...      ┃ ← 正常文字（保持不变）
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛ ← 白色背景（保持不变）
```

### 悬停状态（选中或未选中）
```
┌─────────────────────────────┐ ← 蓝色边框
│ 🔴 合同比对示例             │ ← 向上2px
│    演示合同版本对比...      │ ← 轻微阴影
└─────────────────────────────┘
```

---

## 🔄 交互流程

### 智能文档抽取
```
用户操作流程：
1. 用户点击左侧演示文档 "采购合同示例"
   ↓
2. 文档项高亮显示（蓝色边框、浅蓝背景、蓝色图标）
   ↓
3. 右侧显示该文档的抽取结果
   ↓
4. 用户点击另一个文档 "服务协议示例"
   ↓
5. 前一个文档取消高亮，新文档高亮
```

---

### 智能文档比对
```
用户操作流程：
1. 用户点击左侧演示文档 "合同比对示例"
   ↓
2. 文档项高亮显示
   ↓
3. 右侧显示新旧文档并自动提交比对
   ↓
4. 用户点击"新建任务"按钮
   ↓
5. 选中状态被清除（所有文档恢复未选中状态）
   ↓
6. 右侧显示空白的上传界面
```

---

### 智能合同合成
```
用户操作流程：
1. 用户点击左侧演示模板 "标准合同模板"
   ↓
2. 模板项高亮显示
   ↓
3. 右侧显示该模板的详细信息和字段列表
   ↓
4. 用户填写数据并生成合同
```

---

## ✅ 测试验证

### 测试步骤

#### 1. 智能文档抽取
1. 访问：`http://localhost:3004/extract-main`
2. 点击左侧任意演示文档
3. **验证**：
   - ✅ 点击的文档项显示蓝色边框（2px）
   - ✅ 图标和文字保持原样（不变色）
   - ✅ 背景保持白色
4. 点击另一个文档
5. **验证**：
   - ✅ 前一个文档边框恢复灰色（1px）
   - ✅ 新文档显示蓝色边框（2px）

#### 2. 智能文档比对
1. 访问：`http://localhost:3004/compare`
2. 点击左侧演示文档
3. **验证**：
   - ✅ 文档项显示蓝色边框（2px）
4. 点击"新建任务"按钮
5. **验证**：
   - ✅ 选中状态被清除
   - ✅ 所有文档边框恢复灰色（1px）

#### 3. 智能合同合成
1. 访问：`http://localhost:3004/compose-main`
2. 点击左侧演示模板
3. **验证**：
   - ✅ 模板项显示蓝色边框（2px）
   - ✅ 右侧显示模板信息

---

## 🎨 样式定制

### 修改选中边框颜色

如果需要更改选中效果的边框颜色，修改以下变量：

```scss
&.active {
  border-color: #409EFF;        // 蓝色边框
  border-width: 2px;            // 边框宽度
}
```

### 使用其他颜色方案

**绿色方案**：
```scss
&.active {
  border-color: #67C23A;        // 绿色边框
  border-width: 2px;
}
```

**橙色方案**：
```scss
&.active {
  border-color: #E6A23C;        // 橙色边框
  border-width: 2px;
}
```

**红色方案**：
```scss
&.active {
  border-color: #F56C6C;        // 红色边框
  border-width: 2px;
}
```

---

## 💡 技术要点

### 1. 响应式状态管理
```javascript
const selectedDocId = ref(null)
```
- 使用 Vue 3 的 `ref` API
- 自动追踪依赖和触发更新

### 2. 动态类名绑定
```vue
:class="{ active: selectedDocId === doc.id }"
```
- 对象语法：`{ className: condition }`
- 条件为真时添加类名

### 3. SCSS 嵌套选择器
```scss
&.active {
  .doc-icon { ... }
  .doc-name { ... }
}
```
- `&` 表示父选择器
- 编译为 `.doc-item.active .doc-icon`

### 4. 平滑过渡动画
```scss
transition: all 0.3s;
```
- 所有属性变化都有 0.3 秒过渡
- 包括颜色、背景、阴影等

---

## 🐛 常见问题

### Q1: 选中效果不显示？

**可能原因**：
1. CSS 未正确加载
2. 类名绑定错误

**解决方法**：
1. 检查浏览器开发者工具，查看元素是否有 `active` 类
2. 检查 `selectedDocId` 的值是否正确更新
3. 清除浏览器缓存

---

### Q2: 点击文档后右侧内容不更新？

**可能原因**：
- 父组件未正确处理 `doc-select` 事件

**解决方法**：
1. 检查父组件（如 `ExtractMain.vue`）的事件监听
2. 检查浏览器控制台是否有错误日志

---

### Q3: 多个文档同时高亮？

**可能原因**：
- 文档 ID 重复

**解决方法**：
1. 检查 `getDemoDocuments` API 返回的文档 ID 是否唯一
2. 检查 `v-for` 的 `:key` 绑定是否正确

---

## 📝 总结

✅ **已实现**:
1. 添加了文档选中状态管理（`selectedDocId`）
2. 实现了点击文档时更新选中状态
3. 添加了简洁的选中状态视觉反馈（蓝色边框加粗）
4. 实现了"新建任务"时清除选中状态
5. 统一了三个功能页面的交互体验

✅ **视觉效果**:
- 选中文档：蓝色边框（2px）+ 保持原样式（白色背景、红色图标、正常文字）
- 未选中文档：灰色边框（1px）+ 白色背景 + 红色图标 + 正常文字
- 悬停效果：蓝色边框 + 轻微阴影 + 向上平移

🎉 **用户体验提升**:
- 明确显示当前正在查看的文档
- 避免用户困惑（不知道哪个文档被选中）
- 交互反馈简洁清晰
- 视觉风格统一，不会过于花哨


