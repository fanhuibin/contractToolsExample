# 模板管理功能更新

## 更新时间
2025-11-07

## 更新内容

### 1. ✅ 还原左侧演示文档样式

**修改内容**：演示文档卡片恢复为原来的白色背景样式

**样式对比**：

**之前（蓝色背景）** ❌：
```scss
background: linear-gradient(135deg, #e8f4fd 0%, #f0f9ff 100%);
border: 1px solid #b3d8ff;
.doc-icon {
  background: #409EFF;  // 蓝色背景
  color: #ffffff;       // 白色图标
}
```

**现在（白色背景）** ✅：
```scss
background: white;
border: 1px solid #e4e7ed;
.doc-icon {
  background: #fef0f0;  // 浅红色背景
  color: #f56c6c;       // 红色图标
}
```

**视觉效果**：
```
┌──────────────────────┐
│ 📄 文档名称           │  ← 白色背景
│    描述信息           │  ← 红色 PDF 图标
│    [标签]             │
└──────────────────────┘
```

---

### 2. ✅ "新建任务" 改为 "模板管理"

**智能文档抽取功能**

#### 修改内容
- **按钮文字**：`新建任务` → `模板管理`
- **按钮图标**：`<Plus />` → `<Setting />`
- **功能行为**：清空数据 → 打开模板管理弹窗

#### 功能说明
点击"模板管理"按钮，会打开完整的模板管理界面，用户可以：
- 查看所有抽取模板
- 创建新模板
- 编辑现有模板
- 配置抽取字段
- 使用 AI 生成模板

#### 视觉效果
```
┌─────────────────────┐
│  📁 演示文档         │
├─────────────────────┤
│  [⚙️ 模板管理]       │  ← 蓝色按钮，设置图标
├─────────────────────┤
│  📄 采购合同示例     │
│  📄 服务协议模板     │
└─────────────────────┘
```

---

### 3. ✅ 智能合同合成添加模板管理

**新增功能**

#### 显示位置
与智能文档抽取一致，在左侧演示文档区域的顶部

#### 功能说明
点击"模板管理"按钮，会打开模板管理界面，用户可以：
- 查看所有合成模板
- 查看模板状态（已发布/草稿/禁用）
- 打开模板设计器
- 查看模板详情

#### 视觉效果
```
┌─────────────────────┐
│  📁 演示文档         │
├─────────────────────┤
│  [⚙️ 模板管理]       │  ← 新增按钮
├─────────────────────┤
│  📄 标准合同模板     │
└─────────────────────┘
```

---

## 技术实现

### 组件层级

```
DemoLayout (父组件)
  ├─ 左侧演示文档区
  │   ├─ 演示文档标题
  │   ├─ 模板管理按钮 (新增/修改)
  │   └─ 文档列表
  └─ 右侧内容区
```

### 事件传递

**父组件** (`DemoLayout.vue`):
```vue
<!-- 模板管理按钮 -->
<div v-if="category === 'extract' || category === 'compose'" class="sidebar-action">
  <el-button 
    type="primary" 
    @click="handleManageTemplate"
    style="width: 100%"
  >
    <el-icon><Setting /></el-icon>
    模板管理
  </el-button>
</div>

<script setup>
const emit = defineEmits(['doc-select', 'manage-template'])

const handleManageTemplate = () => {
  console.log('⚙️ 点击模板管理')
  emit('manage-template')
}
</script>
```

**子组件** (`ExtractMain.vue` / `ComposeMain.vue`):
```vue
<template>
  <DemoLayout 
    category="extract" 
    @doc-select="handleDemoDocSelect" 
    @manage-template="handleManageTemplate"
  >
  </DemoLayout>
</template>

<script setup>
const templateDialogVisible = ref(false)

const handleManageTemplate = () => {
  console.log('⚙️ 打开模板管理')
  templateDialogVisible.value = true
}
</script>
```

---

## 按钮显示规则

### 显示条件

| 功能页面         | 显示模板管理按钮 |
|-----------------|----------------|
| 智能文档比对     | ❌ 不显示      |
| 智能文档抽取     | ✅ 显示        |
| 智能合同合成     | ✅ 显示        |

### 代码实现
```vue
<div v-if="category === 'extract' || category === 'compose'" class="sidebar-action">
  <!-- 只在抽取和合成功能显示 -->
</div>
```

---

## 修改的文件

### 1. `DemoLayout.vue` (父组件)
**修改内容**：
- ✅ 还原演示文档卡片样式（白色背景、红色图标）
- ✅ 按钮文字改为"模板管理"
- ✅ 按钮图标改为 `<Setting />`
- ✅ 显示条件改为 `extract || compose`
- ✅ 事件名称改为 `manage-template`
- ✅ 导入 `Setting` 图标

### 2. `ExtractMain.vue` (智能文档抽取)
**修改内容**：
- ✅ 监听事件改为 `@manage-template`
- ✅ 处理函数改为 `handleManageTemplate`
- ✅ 功能改为打开模板管理弹窗

### 3. `Compare.vue` (智能文档比对)
**修改内容**：
- ✅ 移除 `@new-task` 事件监听
- ✅ 删除 `handleNewTask` 函数

### 4. `ComposeMain.vue` (智能合同合成)
**修改内容**：
- ✅ 新增 `@manage-template` 事件监听
- ✅ 新增 `handleManageTemplate` 函数
- ✅ 打开模板管理弹窗

---

## 用户体验改进

### 1. 功能更明确
- **之前**："新建任务" - 功能含义不清晰
- **现在**："模板管理" - 直接说明功能用途

### 2. 操作更便捷
- **之前**：需要在主界面查找模板管理入口
- **现在**：左侧快捷按钮，一键打开

### 3. 覆盖更全面
- **之前**：只有抽取功能有快捷按钮
- **现在**：抽取和合成都有模板管理

---

## 测试验证

### 测试1：文档样式还原
1. 访问任意功能页面
2. ✅ 验证左侧文档卡片为白色背景
3. ✅ 验证图标为红色 PDF 图标（浅红背景）
4. ✅ 验证 hover 效果正常

### 测试2：智能文档抽取 - 模板管理
1. 访问 `/extract-main`
2. ✅ 验证左侧显示"模板管理"按钮（设置图标）
3. ✅ 点击按钮，验证打开模板管理弹窗
4. ✅ 验证弹窗显示完整的模板列表
5. ✅ 验证可以创建、编辑模板

### 测试3：智能文档比对 - 无按钮
1. 访问 `/compare`
2. ✅ 验证左侧**不显示**模板管理按钮
3. ✅ 验证只显示演示文档列表

### 测试4：智能合同合成 - 模板管理
1. 访问 `/compose-main`
2. ✅ 验证左侧显示"模板管理"按钮
3. ✅ 点击按钮，验证打开模板管理弹窗
4. ✅ 验证弹窗显示合成模板列表
5. ✅ 验证可以查看、设计模板

---

## 按钮样式

### CSS 样式
```scss
.sidebar-action {
  padding: 16px;
  border-bottom: 1px solid #e4e7ed;
  background: #fff;

  .el-button {
    height: 40px;
    font-size: 15px;
    font-weight: 500;
    width: 100%;
  }
}
```

### 视觉特点
- **类型**：`type="primary"` - 蓝色主按钮
- **宽度**：100% - 填满容器
- **高度**：40px
- **字体**：15px，字重 500
- **图标**：设置图标 ⚙️
- **位置**：演示文档标题下方

---

## 功能对比

### 智能文档抽取

| 功能       | 之前          | 现在          |
|-----------|--------------|--------------|
| 按钮文字   | 新建任务      | 模板管理      |
| 按钮图标   | Plus ➕      | Setting ⚙️   |
| 点击行为   | 清空数据      | 打开模板管理  |

### 智能文档比对

| 功能       | 之前          | 现在          |
|-----------|--------------|--------------|
| 按钮显示   | ✅ 显示       | ❌ 不显示     |
| 原因       | 支持新建任务  | 无模板管理需求 |

### 智能合同合成

| 功能       | 之前          | 现在          |
|-----------|--------------|--------------|
| 按钮显示   | ❌ 不显示     | ✅ 显示       |
| 按钮文字   | -            | 模板管理      |
| 点击行为   | -            | 打开模板管理  |

---

## 后续优化建议

### 功能增强
1. 添加模板计数标签（如："模板管理 (12)"）
2. 支持快捷键打开（如：Ctrl+M）
3. 添加最近使用的模板快捷列表
4. 支持拖拽排序模板

### 视觉优化
1. 添加按钮加载状态
2. 优化弹窗打开动画
3. 添加模板缩略图预览
4. 支持深色模式

### 用户体验
1. 记住用户上次打开的模板
2. 支持模板搜索和筛选
3. 添加模板使用统计
4. 提供模板使用教程

---

## 总结

✅ **演示文档样式**：还原为白色背景，视觉清晰
✅ **按钮功能升级**："新建任务" → "模板管理"，功能更明确
✅ **覆盖范围扩大**：抽取和合成都支持快捷模板管理
✅ **用户体验提升**：一键打开，操作更便捷

所有修改都围绕**简化操作流程**和**提升功能可见性**展开，让用户可以更方便地管理模板！

