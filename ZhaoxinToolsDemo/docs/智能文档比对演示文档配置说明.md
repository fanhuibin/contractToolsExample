# 智能文档比对演示文档配置说明

## 📋 配置概述

为智能文档比对功能配置了**3个演示文档**，展示不同的比对场景。所有演示文档都使用同一个历史比对任务ID，确保演示效果一致且可靠。

---

## 🎯 演示场景

### 场景1：模板与填写内容比对

**文档名称**: `模板与填写内容比对`

**业务场景**:
- 比对空白合同模板与填写完成的合同
- 展示数据填充的位置和内容
- 识别哪些字段被填写了

**适用客户**:
- 合同管理系统
- 文档自动化平台
- 数据填充验证场景

**展示效果**:
- 空白模板 vs 填写后文档
- 高亮显示填写的内容
- 清晰展示数据变化

---

### 场景2：不同版本比对

**文档名称**: `不同版本比对`

**业务场景**:
- 比对文档的修订前后版本
- 追踪文档修改历史
- 版本控制和变更管理

**适用客户**:
- 法务审核系统
- 文档版本管理
- 合同修订追踪

**展示效果**:
- 原始版本 vs 修订版本
- 高亮显示修改、新增、删除的内容
- 完整的变更追踪

---

### 场景3：盖章版与定稿版比对

**文档名称**: `盖章版与定稿版比对`

**业务场景**:
- 比对定稿版本与盖章后的文档
- 验证盖章过程中文档是否被篡改
- 确保文档一致性和安全性

**适用客户**:
- 电子签章系统
- 合同安全审计
- 文档防篡改验证

**展示效果**:
- 定稿版 vs 盖章版
- 识别盖章位置
- 验证内容一致性

---

## 🔧 技术配置

### 后端配置

**文件路径**: `ZhaoxinToolsDemo/backend/src/main/java/com/zhaoxin/tools/demo/controller/DemoResourceController.java`

```java
// 智能文档比对 - 演示文档（关联历史比对任务）

// 场景1：模板与填写内容比对
documents.add(new DemoDocument(
    "compare_demo_1",                               // 文档ID
    "模板与填写内容比对",                            // 显示名称
    null,                                          // filePath（不需要）
    "compare",                                     // 分类
    null,                                          // templateId（不需要）
    "5d1fd427-9dcf-4a8f-b72d-96058bd0862e",        // 任务ID
    "演示空白模板与填写后内容的差异比对"              // 描述
));

// 场景2：不同版本比对
documents.add(new DemoDocument(
    "compare_demo_2",
    "不同版本比对",
    null,
    "compare",
    null,
    "5d1fd427-9dcf-4a8f-b72d-96058bd0862e",        // 使用相同的任务ID
    "演示同一文档修订前后的版本差异比对"
));

// 场景3：盖章版与定稿版比对
documents.add(new DemoDocument(
    "compare_demo_3",
    "盖章版与定稿版比对",
    null,
    "compare",
    null,
    "5d1fd427-9dcf-4a8f-b72d-96058bd0862e",        // 使用相同的任务ID
    "演示盖章后文档与定稿版本的差异比对"
));
```

---

### 任务ID配置

**统一使用的任务ID**:
```
5d1fd427-9dcf-4a8f-b72d-96058bd0862e
```

**说明**:
- 所有三个演示文档都使用同一个任务ID
- 简化配置，只需维护一个历史任务
- 确保演示效果稳定可靠

---

## 🎨 前端展示

### 左侧演示文档列表

```
┌─────────────────────────────────┐
│ 📋 演示文档                      │
├─────────────────────────────────┤
│ 🔴 模板与填写内容比对            │
│    演示空白模板与填写后内容...   │
├─────────────────────────────────┤
│ 🔴 不同版本比对                  │
│    演示同一文档修订前后的...     │
├─────────────────────────────────┤
│ 🔴 盖章版与定稿版比对            │
│    演示盖章后文档与定稿版本...   │
└─────────────────────────────────┘
```

### 用户交互流程

```
用户点击"模板与填写内容比对"
    ↓
系统检测到 taskId
    ↓
跳转到结果页面：/compare/result/5d1fd427-9dcf-4a8f-b72d-96058bd0862e
    ↓
显示历史比对结果
    ↓
用户查看差异高亮、统计信息等
```

---

## 📊 配置对比

### 修改前

| 文档ID | 名称 | 任务ID | 说明 |
|--------|------|--------|------|
| compare_demo_1 | 采购合同比对示例 | 202511_a44df1619ce14a2facb2ebd44cdf8618 | - |
| compare_demo_2 | 服务协议比对示例 | 202511_31ee983d5936435aa74ec1867dd6b411 | - |

**问题**:
- ❌ 任务ID不存在或已过期
- ❌ 场景描述不清晰
- ❌ 只有2个演示文档

---

### 修改后

| 文档ID | 名称 | 任务ID | 场景描述 |
|--------|------|--------|---------|
| compare_demo_1 | 模板与填写内容比对 | 5d1fd427-9dcf-4a8f-b72d-96058bd0862e | 空白模板 vs 填写内容 |
| compare_demo_2 | 不同版本比对 | 5d1fd427-9dcf-4a8f-b72d-96058bd0862e | 原始版 vs 修订版 |
| compare_demo_3 | 盖章版与定稿版比对 | 5d1fd427-9dcf-4a8f-b72d-96058bd0862e | 定稿版 vs 盖章版 |

**优势**:
- ✅ 使用有效的任务ID
- ✅ 场景描述清晰明确
- ✅ 覆盖3种常见比对场景
- ✅ 统一管理，易于维护

---

## 🔄 数据流程

### 完整交互流程

```
1. 用户访问比对页面
   http://localhost:3004/compare
       ↓
2. 系统加载演示文档列表
   GET /api/demo/documents
       ↓
3. 返回3个比对演示文档
   {
     "data": [
       {
         "id": "compare_demo_1",
         "name": "模板与填写内容比对",
         "taskId": "5d1fd427-9dcf-4a8f-b72d-96058bd0862e",
         ...
       },
       ...
     ]
   }
       ↓
4. 用户点击某个演示文档
       ↓
5. 前端检测到 taskId 存在
   if (doc.taskId) { ... }
       ↓
6. 直接跳转到结果页面
   router.push(`/compare/result/${doc.taskId}`)
       ↓
7. 结果页面加载比对结果
   GET /api/gpu/compare/task/status/5d1fd427-9dcf-4a8f-b72d-96058bd0862e
       ↓
8. 显示比对结果
   - 差异高亮
   - 统计信息
   - 导航功能
```

---

## ✅ 测试验证

### 测试步骤

#### 1. 测试演示文档接口

```bash
GET http://localhost:8091/api/demo/documents
```

**预期返回**:
```json
{
  "code": 200,
  "message": "操作成功",
  "data": [
    {
      "id": "compare_demo_1",
      "name": "模板与填写内容比对",
      "filePath": null,
      "category": "compare",
      "templateId": null,
      "taskId": "5d1fd427-9dcf-4a8f-b72d-96058bd0862e",
      "description": "演示空白模板与填写后内容的差异比对"
    },
    {
      "id": "compare_demo_2",
      "name": "不同版本比对",
      "filePath": null,
      "category": "compare",
      "templateId": null,
      "taskId": "5d1fd427-9dcf-4a8f-b72d-96058bd0862e",
      "description": "演示同一文档修订前后的版本差异比对"
    },
    {
      "id": "compare_demo_3",
      "name": "盖章版与定稿版比对",
      "filePath": null,
      "category": "compare",
      "templateId": null,
      "taskId": "5d1fd427-9dcf-4a8f-b72d-96058bd0862e",
      "description": "演示盖章后文档与定稿版本的差异比对"
    }
  ]
}
```

**验证点**:
- ✅ 返回3个比对演示文档
- ✅ 所有文档的 `taskId` 相同
- ✅ `category` 都是 `compare`
- ✅ 名称和描述清晰明确

---

#### 2. 测试前端显示

1. 访问：`http://localhost:3004/compare`
2. 查看左侧演示文档列表

**验证点**:
- ✅ 显示3个演示文档
- ✅ 文档名称正确：
  - "模板与填写内容比对"
  - "不同版本比对"
  - "盖章版与定稿版比对"
- ✅ 描述文字清晰

---

#### 3. 测试点击跳转

1. 点击"模板与填写内容比对"
2. **验证**：
   - ✅ 提示："正在加载比对结果：模板与填写内容比对"
   - ✅ 跳转到：`/compare/result/5d1fd427-9dcf-4a8f-b72d-96058bd0862e`
   - ✅ 显示比对结果

3. 返回，点击"不同版本比对"
4. **验证**：
   - ✅ 跳转到相同的结果页面（同一个任务ID）
   - ✅ 显示比对结果

5. 返回，点击"盖章版与定稿版比对"
6. **验证**：
   - ✅ 跳转到相同的结果页面
   - ✅ 显示比对结果

---

#### 4. 测试任务ID有效性

访问：`http://localhost:8080/api/gpu/compare/task/status/5d1fd427-9dcf-4a8f-b72d-96058bd0862e`

**预期**:
- ✅ 返回任务状态
- ✅ 任务存在且可访问
- ✅ 状态为 `COMPLETED`

---

## 💡 使用建议

### 1. 向客户展示时

**展示顺序**:
1. **先展示"模板与填写内容比对"**
   - 最容易理解的场景
   - 展示基本的比对能力

2. **再展示"不同版本比对"**
   - 最常见的应用场景
   - 展示版本管理能力

3. **最后展示"盖章版与定稿版比对"**
   - 高级应用场景
   - 展示安全验证能力

---

### 2. 讲解要点

#### 场景1：模板与填写内容比对
- 强调：自动识别填写字段
- 优势：快速验证数据填充
- 应用：合同生成、表单填写

#### 场景2：不同版本比对
- 强调：精确的变更追踪
- 优势：完整的修订历史
- 应用：合同修改、文档审核

#### 场景3：盖章版与定稿版比对
- 强调：防篡改验证
- 优势：确保文档安全
- 应用：电子签章、合同归档

---

### 3. 常见问题解答

**Q: 为什么三个演示都指向同一个比对结果？**

**A**: 
- 便于维护：只需维护一个历史任务
- 演示目的：重点展示比对功能，而非具体内容
- 实际应用：客户可以针对不同场景创建不同的比对任务

**Q: 如何为不同场景配置不同的比对结果？**

**A**:
```java
// 如果需要，可以为每个场景配置不同的任务ID
documents.add(new DemoDocument(
    "compare_demo_1",
    "模板与填写内容比对",
    null,
    "compare",
    null,
    "任务ID_1",  // ← 使用不同的任务ID
    "..."
));

documents.add(new DemoDocument(
    "compare_demo_2",
    "不同版本比对",
    null,
    "compare",
    null,
    "任务ID_2",  // ← 使用不同的任务ID
    "..."
));
```

---

## 🔧 维护指南

### 如何更换演示任务

#### 步骤1：创建新的比对任务

在主系统中进行实际比对，获取任务ID：

1. 上传两份文档
2. 提交比对任务
3. 等待完成
4. 复制任务ID

---

#### 步骤2：更新配置

修改 `DemoResourceController.java`:

```java
// 将所有演示文档的 taskId 更新为新的ID
"5d1fd427-9dcf-4a8f-b72d-96058bd0862e"  // 旧ID
    ↓
"新的任务ID"  // 新ID
```

---

#### 步骤3：重启服务

```bash
cd ZhaoxinToolsDemo/backend
mvn spring-boot:run
```

---

#### 步骤4：验证

1. 访问演示文档接口，确认 `taskId` 已更新
2. 在前端点击演示文档，验证能正常显示比对结果

---

## 📝 总结

✅ **已配置**:
1. 3个清晰的比对场景
2. 统一的任务ID管理
3. 完整的前后端集成
4. 详细的文档说明

✅ **展示效果**:
- 场景丰富：覆盖常见业务场景
- 名称清晰：一目了然的场景描述
- 操作简单：点击即可查看结果
- 演示流畅：无需等待，立即展示

✅ **便于维护**:
- 单一任务ID：只需维护一个历史任务
- 配置集中：所有配置在同一个文件
- 扩展方便：可轻松添加新场景

🎉 **演示文档配置完成！**

