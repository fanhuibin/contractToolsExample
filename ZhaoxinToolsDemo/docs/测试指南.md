# 新布局功能测试指南

## 测试前准备

### 1. 准备演示 PDF 文档

在 `ZhaoxinToolsDemo/backend/src/main/resources/demo` 目录下放置以下文件：

```
demo/
├── extract/
│   ├── 采购合同示例.pdf      # 任意包含结构化信息的PDF
│   └── 服务协议示例.pdf      # 任意包含结构化信息的PDF
└── compare/
    ├── 合同-原始版.pdf        # 用于比对的原始文档
    └── 合同-修订版.pdf        # 用于比对的修订文档
```

**注意**：
- 如果没有真实的 PDF 文件，可以创建任意 PDF 文档并重命名为以上名称
- 文件名必须与代码中配置的完全一致
- 文件大小建议不超过 10MB

### 2. 配置合成模板（可选）

如需测试合成功能：
1. 在主系统（端口 8080）中创建一个模板
2. 获取模板 ID
3. 修改 `DemoResourceController.java` 中的模板 ID：
   ```java
   "compose_demo_1",
   "标准合同模板",
   null,
   "compose",
   "你的模板ID",  // 替换为实际的模板ID
   "用于演示合同合成功能的标准模板"
   ```

## 启动服务

### 1. 启动主系统后端
```bash
cd contract-tools-sdk
mvn spring-boot:run
# 默认端口: 8080
```

### 2. 启动 Demo 后端
```bash
cd ZhaoxinToolsDemo/backend
mvn spring-boot:run
# 默认端口: 8091
```

### 3. 启动 Demo 前端
```bash
cd ZhaoxinToolsDemo/frontend
npm run dev
# 默认端口: 3004
```

## 测试用例

### 测试 1：布局基本功能

#### 1.1 顶部导航栏
- [ ] 访问 `http://localhost:3004`（会重定向到 `/extract-main`）
- [ ] 检查顶部导航栏是否正常显示
- [ ] 检查 Logo 和应用名称是否显示
- [ ] 检查三个导航按钮是否正确显示：
  - 智能文档抽取
  - 智能文档比对
  - 智能合同合成
- [ ] 当前页面对应的导航按钮是否高亮
- [ ] 点击每个导航按钮，检查页面切换是否正常

#### 1.2 左侧演示文档区
- [ ] 左侧栏是否显示"演示文档"标题
- [ ] 演示文档列表是否正常加载
- [ ] 文档卡片是否正确显示文档名称和描述
- [ ] 鼠标悬停时卡片是否有高亮效果
- [ ] 滚动条是否正常工作（如果文档较多）

#### 1.3 右侧功能区
- [ ] 功能区内容是否正常显示
- [ ] 功能区是否可以正常滚动
- [ ] 功能区布局是否居中（最大宽度 1200px）

### 测试 2：智能文档抽取

#### 2.1 基本流程
- [ ] 访问 `/extract-main`
- [ ] 左侧是否显示2个演示文档（采购合同、服务协议）
- [ ] 点击"采购合同示例.pdf"
  - [ ] 是否显示"正在加载演示文档..."消息
  - [ ] 文档是否成功加载（文件选择区显示已选择）
  - [ ] 是否自动选择了模板（如果配置了）
  - [ ] 是否显示成功消息

#### 2.2 执行抽取
- [ ] 选择一个模板（如果没有自动选择）
- [ ] 点击"开始抽取"
- [ ] 抽取任务是否正常提交
- [ ] 进度显示是否正常
- [ ] 结果对话框是否正常显示

#### 2.3 切换文档
- [ ] 点击"服务协议示例.pdf"
- [ ] 是否替换了之前的文档
- [ ] 是否可以重新抽取

### 测试 3：智能文档比对

#### 3.1 基本流程
- [ ] 访问 `/compare`
- [ ] 左侧是否显示2个演示文档（原始版、修订版）
- [ ] 点击"合同-原始版.pdf"
  - [ ] 文档是否加载到"基准文件"位置
  - [ ] 显示消息："已加载基准文件（旧版本）"

#### 3.2 加载第二个文档
- [ ] 点击"合同-修订版.pdf"
  - [ ] 文档是否加载到"比对文件"位置
  - [ ] 显示消息："已加载修订文件（新版本）"

#### 3.3 执行比对
- [ ] 两个文件都加载后，"开始比对"按钮是否可用
- [ ] 点击"开始比对"
- [ ] 比对任务是否正常提交
- [ ] 是否跳转到结果页面
- [ ] 比对结果是否正常显示

### 测试 4：智能合同合成

#### 4.1 基本流程
- [ ] 访问 `/compose-main`
- [ ] 左侧是否显示演示模板（如果后端配置了）
- [ ] 点击演示模板
  - [ ] 模板是否自动选中
  - [ ] 是否自动跳转到"填写数据"步骤
  - [ ] 显示消息："已选择模板：xxx"

#### 4.2 执行合成
- [ ] 填写必要的数据字段
- [ ] 点击"生成合同"
- [ ] 合同是否成功生成
- [ ] 下载按钮是否正常显示

### 测试 5：响应式布局

#### 5.1 不同屏幕尺寸
测试以下屏幕宽度：
- [ ] 1920px：左侧栏 320px
- [ ] 1440px：左侧栏 320px
- [ ] 1280px：左侧栏 280px，字体略小
- [ ] 1024px：布局是否正常

#### 5.2 浏览器缩放
- [ ] 缩放到 90%
- [ ] 缩放到 110%
- [ ] 检查布局是否保持正常

### 测试 6：错误处理

#### 6.1 文档加载失败
- [ ] 删除一个演示文档（从 resources/demo 目录）
- [ ] 重启后端
- [ ] 点击该文档
- [ ] 是否显示友好的错误消息

#### 6.2 API 错误
- [ ] 关闭主系统后端（端口 8080）
- [ ] 尝试执行抽取/比对/合成
- [ ] 是否显示友好的错误消息

### 测试 7：兼容性测试

#### 7.1 浏览器兼容性
- [ ] Chrome 最新版
- [ ] Firefox 最新版
- [ ] Edge 最新版
- [ ] Safari（如果可用）

#### 7.2 操作系统
- [ ] Windows
- [ ] macOS（如果可用）
- [ ] Linux（如果可用）

## 问题记录模板

如果发现问题，请记录以下信息：

```
### 问题描述
[简要描述问题]

### 复现步骤
1. 
2. 
3. 

### 预期行为
[应该发生什么]

### 实际行为
[实际发生了什么]

### 环境信息
- 浏览器：[Chrome 版本号]
- 操作系统：[Windows 10/macOS/Linux]
- 屏幕分辨率：[1920x1080]

### 控制台错误
[复制浏览器控制台的错误信息]

### 截图
[如果可能，提供截图]
```

## 性能测试

### 加载速度
- [ ] 首次加载时间 < 2秒
- [ ] 演示文档列表加载 < 1秒
- [ ] 页面切换响应 < 500ms
- [ ] 文档加载时间 < 3秒（取决于文件大小）

### 内存使用
- [ ] 打开浏览器开发工具 → Performance Monitor
- [ ] 检查内存使用是否稳定
- [ ] 切换页面多次，检查是否有内存泄漏

## 测试完成

所有测试通过后，请在以下位置打勾：

- [ ] 布局基本功能
- [ ] 智能文档抽取
- [ ] 智能文档比对
- [ ] 智能合同合成
- [ ] 响应式布局
- [ ] 错误处理
- [ ] 兼容性测试
- [ ] 性能测试

## 常见问题解决

### Q1: 演示文档列表为空
**解决方案**：
1. 检查 `resources/demo` 目录是否存在
2. 检查文件名是否与代码配置一致
3. 检查后端日志是否有错误
4. 重启后端服务

### Q2: 点击文档无反应
**解决方案**：
1. 打开浏览器控制台查看错误
2. 检查网络请求是否成功
3. 检查 Demo 后端是否正常运行
4. 检查文件路径是否正确

### Q3: 模板自动选择失败
**解决方案**：
1. 检查主系统中是否存在对应模板
2. 检查模板名称/ID 是否匹配
3. 检查模板状态是否为"已发布"

### Q4: 页面布局错乱
**解决方案**：
1. 清除浏览器缓存
2. 刷新页面（Ctrl+F5）
3. 检查浏览器缩放是否为 100%
4. 尝试其他浏览器

